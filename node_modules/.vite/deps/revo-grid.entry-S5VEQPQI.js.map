{
  "version": 3,
  "sources": ["../../@revolist/revogrid/dist/esm/src/themeManager/theme.compact.ts", "../../@revolist/revogrid/dist/esm/src/themeManager/theme.default.ts", "../../@revolist/revogrid/dist/esm/src/themeManager/theme.material.ts", "../../@revolist/revogrid/dist/esm/src/themeManager/theme.service.ts", "../../@revolist/revogrid/dist/esm/src/services/column.data.provider.ts", "../../@revolist/revogrid/dist/esm/src/services/data.provider.ts", "../../@revolist/revogrid/dist/esm/src/services/dimension.provider.ts", "../../@revolist/revogrid/dist/esm/src/services/viewport.provider.ts", "../../@revolist/revogrid/dist/esm/src/components/revoGrid/viewport.service.ts", "../../@revolist/revogrid/dist/esm/src/components/revoGrid/viewport.scrolling.service.ts", "../../@revolist/revogrid/dist/esm/src/services/selection.store.connector.ts", "../../@revolist/revogrid/dist/esm/src/components/order/order-renderer.tsx", "../../@revolist/revogrid/dist/esm/src/components/revoGrid/grid.helpers.ts", "../../@revolist/revogrid/dist/esm/src/utils/mobile.ts", "../../@revolist/revogrid/dist/esm/src/plugins/wcag/index.ts", "../../@revolist/revogrid/dist/esm/src/components/revoGrid/plugin.service.ts", "../../@revolist/revogrid/dist/esm/src/plugins/rtl/rtl.plugin.ts", "../../@revolist/revogrid/dist/esm/src/components/revoGrid/revo-grid-style.scss?tag=revo-grid", "../../@revolist/revogrid/dist/esm/src/components/revoGrid/revo-grid.tsx"],
  "sourcesContent": ["import { ThemePackage } from '../types/theme';\n\nexport class ThemeCompact implements ThemePackage {\n  defaultRowSize = 32;\n}\n", "import { ThemePackage } from '../types/theme';\n\nexport class ThemeDefault implements ThemePackage {\n  defaultRowSize = 27;\n}\n", "import { ThemePackage } from '../types/theme';\n\nexport class ThemeMaterial implements ThemePackage {\n  defaultRowSize = 42;\n}\n", "import type { Theme, ThemeConfig, ThemePackage } from '../types/theme';\nimport { ThemeCompact } from './theme.compact';\nimport { ThemeDefault } from './theme.default';\nimport { ThemeMaterial } from './theme.material';\n\nexport const DEFAULT_THEME = 'default';\n\nexport const allowedThemes: Theme[] = [\n  DEFAULT_THEME,\n  'material',\n  'compact',\n  'darkMaterial',\n  'darkCompact',\n];\nexport default class ThemeService {\n  private currentTheme: ThemePackage;\n  private customRowSize = 0;\n\n  get theme() {\n    return this.currentTheme;\n  }\n\n  get rowSize() {\n    return this.customRowSize || this.currentTheme.defaultRowSize;\n  }\n\n  set rowSize(size: number) {\n    this.customRowSize = size;\n  }\n\n  constructor(cfg: ThemeConfig) {\n    this.customRowSize = cfg.rowSize;\n    this.register('default');\n  }\n\n  register(theme: Theme) {\n    const parsedTheme = getTheme(theme);\n    switch (parsedTheme) {\n      case 'material':\n      case 'darkMaterial':\n        this.currentTheme = new ThemeMaterial();\n        break;\n      case 'compact':\n      case 'darkCompact':\n        this.currentTheme = new ThemeCompact();\n        break;\n      default:\n        this.currentTheme = new ThemeDefault();\n        break;\n    }\n  }\n}\n\n\nexport function getTheme(theme?: string | null): Theme {\n  if (theme && allowedThemes.indexOf(theme as Theme) > -1) {\n    return theme as Theme;\n  }\n  return DEFAULT_THEME;\n}", "import reduce from 'lodash/reduce';\nimport {\n  columnTypes,\n  DataStore,\n  getSourceItem,\n  getSourceItemVirtualIndexByProp,\n  Groups,\n  setSourceByPhysicalIndex,\n  setSourceByVirtualIndex,\n} from '@store';\nimport type {\n  ColumnProp,\n  ColumnRegular,\n  DimensionCols,\n} from '@type';\nimport { ColumnCollection, getColumnType } from '../utils/column.utils';\n\nexport type ColumnDataSources = Record<\n  DimensionCols,\n  DataStore<ColumnRegular, DimensionCols>\n>;\n\nexport default class ColumnDataProvider {\n  readonly dataSources: ColumnDataSources;\n  collection: ColumnCollection | null = null;\n\n  get stores() {\n    return this.dataSources;\n  }\n  constructor() {\n    this.dataSources = columnTypes.reduce(\n      (sources: ColumnDataSources, k: DimensionCols) => {\n        sources[k] = new DataStore(k);\n        return sources;\n      },\n      {} as ColumnDataSources,\n    );\n  }\n\n  column(c: number, type: DimensionCols = 'rgCol'): ColumnRegular | undefined {\n    return this.getColumn(c, type);\n  }\n\n  getColumn(\n    virtualIndex: number,\n    type: DimensionCols,\n  ): ColumnRegular | undefined {\n    return getSourceItem(this.dataSources[type].store, virtualIndex);\n  }\n\n  getRawColumns(): Record<DimensionCols, ColumnRegular[]> {\n    return reduce(\n      this.dataSources,\n      (\n        result: Record<DimensionCols, ColumnRegular[]>,\n        item,\n        type: DimensionCols,\n      ) => {\n        result[type] = item.store.get('source');\n        return result;\n      },\n      {\n        rgCol: [],\n        colPinStart: [],\n        colPinEnd: [],\n      },\n    );\n  }\n\n  getColumns(type: DimensionCols | 'all' = 'all'): ColumnRegular[] {\n    const columnsByType = this.getRawColumns();\n    if (type !== 'all') {\n      return columnsByType[type];\n    }\n    return columnTypes.reduce((r: ColumnRegular[], t) => [...r, ...columnsByType[t]], []);\n  }\n\n  getColumnIndexByProp(prop: ColumnProp, type: DimensionCols): number {\n    return getSourceItemVirtualIndexByProp(this.dataSources[type].store, prop);\n  }\n\n  getColumnByProp(prop: ColumnProp) {\n    return this.collection?.columnByProp[prop];\n  }\n\n  refreshByType(type: DimensionCols) {\n    this.dataSources[type].refresh();\n  }\n\n  /**\n   * Main method to set columns\n   */\n  setColumns(data: ColumnCollection): ColumnCollection {\n    columnTypes.forEach(k => {\n      // set columns data\n      this.dataSources[k].updateData(data.columns[k], {\n        // max depth level\n        depth: data.maxLevel,\n\n        // groups\n        groups: data.columnGrouping[k].reduce((res: Groups, g) => {\n          if (!res[g.level]) {\n            res[g.level] = [];\n          }\n          res[g.level].push(g);\n          return res;\n        }, {}),\n      });\n    });\n    this.collection = data;\n    return data;\n  }\n\n  /**\n   * Used in plugins\n   * Modify columns in store\n   */\n  updateColumns(updatedColumns: ColumnRegular[]) {\n    // collect column by type and propert\n    const columnByKey = updatedColumns.reduce(\n      (\n        res: Partial<Record<DimensionCols, Record<ColumnProp, ColumnRegular>>>,\n        c,\n      ) => {\n        const type = getColumnType(c);\n        if (!res[type]) {\n          res[type] = {};\n        }\n        res[type][c.prop] = c;\n        return res;\n      },\n      {},\n    );\n\n    // find indexes in source\n    const colByIndex: Partial<\n      Record<DimensionCols, Record<number, ColumnRegular>>\n    > = {};\n    for (const t in columnByKey) {\n      if (!columnByKey.hasOwnProperty(t)) {\n        continue;\n      }\n      const type = t as DimensionCols;\n      const colsToUpdate = columnByKey[type];\n      const sourceItems = this.dataSources[type].store.get('source');\n      colByIndex[type] = {};\n      for (let i = 0; i < sourceItems.length; i++) {\n        const column = sourceItems[i];\n        const colToUpdateIfExists = colsToUpdate?.[column.prop];\n\n        // update column if exists in source\n        if (colToUpdateIfExists) {\n          colByIndex[type][i] = colToUpdateIfExists;\n        }\n      }\n    }\n    for (const t in colByIndex) {\n      if (!colByIndex.hasOwnProperty(t)) {\n        continue;\n      }\n      const type = t as DimensionCols;\n      setSourceByPhysicalIndex(\n        this.dataSources[type].store,\n        colByIndex[type] || {},\n      );\n    }\n  }\n\n  updateColumn(column: ColumnRegular, index: number) {\n    const type = getColumnType(column);\n    setSourceByVirtualIndex(this.dataSources[type].store, { [index]: column });\n  }\n}\n", "import reduce from 'lodash/reduce';\n\nimport {\n  isRowType,\n  rowTypes,\n  DataStore,\n  getSourceItem,\n  getVisibleSourceItem,\n  Groups,\n  Trimmed,\n} from '@store';\nimport DimensionProvider from './dimension.provider';\nimport type { GroupLabelTemplateFunc } from '../plugins/groupingRow/grouping.row.types';\nimport type {\n  DataLookup,\n  DimensionRows,\n  DataType,\n  BeforeSaveDataDetails,\n} from '@type';\n\nexport type RowDataSources = {\n  [T in DimensionRows]: DataStore<DataType, DimensionRows>;\n};\n\n/**\n * Data source provider\n * \n * @dependsOn DimensionProvider\n */\n\nexport class DataProvider {\n  public readonly stores: RowDataSources;\n  constructor(private dimensionProvider: DimensionProvider) {\n    this.stores = reduce(\n      rowTypes,\n      (sources: Partial<RowDataSources>, k: DimensionRows) => {\n        sources[k] = new DataStore(k);\n        return sources;\n      },\n      {},\n    ) as RowDataSources;\n  }\n\n  setData(\n    data: DataType[],\n    type: DimensionRows = 'rgRow',\n    disableVirtualRows = false,\n    grouping?: {\n      depth: number;\n      groups?: Groups;\n      customRenderer?: GroupLabelTemplateFunc;\n    },\n    silent = false,\n  ): DataType[] {\n    // set rgRow data\n    this.stores[type].updateData([...data], grouping, silent);\n\n    // for pinned row no need virtual data\n    const noVirtual = type !== 'rgRow' || disableVirtualRows;\n    this.dimensionProvider.setData(data.length, type, noVirtual);\n    return data;\n  }\n\n  getModel(virtualIndex: number, type: DimensionRows = 'rgRow') {\n    const store = this.stores[type].store;\n    return getSourceItem(store, virtualIndex);\n  }\n\n  changeOrder({ rowType = 'rgRow', from, to }: { rowType: DimensionRows, from: number; to: number }) {\n    const storeService = this.stores[rowType];\n\n    // take currently visible row indexes\n    const newItemsOrder = [...storeService.store.get('proxyItems')];\n    const prevItems = storeService.store.get('items');\n\n    // take out\n    const toMove = newItemsOrder.splice(\n      newItemsOrder.indexOf(prevItems[from]), // get index in proxy\n      1\n    );\n    // insert before\n    newItemsOrder.splice(\n      newItemsOrder.indexOf(prevItems[to]),  // get index in proxy\n      0,\n      ...toMove\n    );\n    storeService.setData({\n      proxyItems: newItemsOrder,\n    });\n\n    // take currently visible row indexes\n    const newItems = storeService.store.get('items');\n    this.dimensionProvider.updateSizesPositionByNewDataIndexes(\n      rowType,\n      newItems,\n      prevItems\n    );\n  }\n\n  setCellData(\n    { type, rowIndex, prop, val }: Pick<BeforeSaveDataDetails, 'type' | 'rowIndex' | 'prop' | 'val'>, \n    mutate = true,\n  ) {\n    const model = this.getModel(rowIndex, type);\n    model[prop] = val;\n    this.stores[type].setSourceData({ [rowIndex]: model }, mutate);\n  }\n\n  setRangeData(data: DataLookup, type: DimensionRows) {\n    const items: Record<number, DataType> = {};\n    for (let rowIndex in data) {\n      const oldModel = (items[rowIndex] = getSourceItem(\n        this.stores[type].store,\n        parseInt(rowIndex, 10),\n      ));\n      if (!oldModel) {\n        continue;\n      }\n      for (let prop in data[rowIndex]) {\n        oldModel[prop] = data[rowIndex][prop];\n      }\n    }\n    this.stores[type].setSourceData(items);\n  }\n\n  refresh(type: DimensionRows | 'all' = 'all') {\n    if (isRowType(type)) {\n      this.refreshItems(type);\n    }\n    rowTypes.forEach((t: DimensionRows) => this.refreshItems(t));\n  }\n\n  refreshItems(type: DimensionRows = 'rgRow') {\n    const items = this.stores[type].store.get('items');\n    this.stores[type].setData({ items: [...items] });\n  }\n\n  setGrouping({ depth }: { depth: number }, type: DimensionRows = 'rgRow') {\n    this.stores[type].setData({ groupingDepth: depth });\n  }\n\n  setTrimmed(trimmed: Trimmed, type: DimensionRows = 'rgRow') {\n    const store = this.stores[type];\n    store.addTrimmed(trimmed);\n    this.dimensionProvider.setTrimmed(trimmed, type);\n    if (type === 'rgRow') {\n      this.dimensionProvider.setData(\n        getVisibleSourceItem(store.store).length,\n        type,\n      );\n    }\n  }\n}\n", "import reduce from 'lodash/reduce';\nimport debounce from 'lodash/debounce';\nimport ViewportProvider from './viewport.provider';\nimport { RESIZE_INTERVAL } from '../utils/consts';\n\nimport {\n  columnTypes,\n  rowTypes,\n  getItemByIndex,\n  DimensionStore,\n  DimensionStoreCollection,\n  gatherTrimmedItems,\n  Trimmed,\n} from '@store';\nimport type {\n  DimensionCols,\n  DimensionType,\n  MultiDimensionType,\n  ColumnRegular,\n  DimensionSettingsState,\n  ViewPortScrollEvent,\n  ViewSettingSizeProp,\n  ViewportState,\n} from '@type';\nimport { getColumnSizes } from '../utils/column.utils';\n\nexport type DimensionConfig = {\n  realSizeChanged(k: MultiDimensionType): void;\n};\n/**\n * Dimension provider\n * Stores dimension information and custom sizes\n * \n * @dependsOn ViewportProvider\n */\nexport default class DimensionProvider {\n  readonly stores: DimensionStoreCollection;\n  constructor(\n    private viewports: ViewportProvider,\n    config: DimensionConfig,\n  ) {\n    const sizeChanged = debounce(\n      (k: MultiDimensionType) => config.realSizeChanged(k),\n      RESIZE_INTERVAL,\n    );\n    this.stores = reduce(\n      [...rowTypes, ...columnTypes],\n      (sources: Partial<DimensionStoreCollection>, t: MultiDimensionType) => {\n        sources[t] = new DimensionStore(t);\n        sources[t].store.onChange('realSize', () => sizeChanged(t));\n        return sources;\n      },\n      {},\n    ) as DimensionStoreCollection;\n  }\n\n  /**\n   * Clear old sizes from dimension and viewports\n   * @param type - dimension type\n   * @param count - count of items\n   */\n  clearSize(t: MultiDimensionType, count: number) {\n    this.stores[t].drop();\n    // after we done with drop trigger viewport recalculaction\n    this.viewports.stores[t].setOriginalSizes(\n      this.stores[t].store.get('originItemSize'),\n    );\n    this.setItemCount(count, t);\n  }\n\n  /**\n   * Apply new custom sizes to dimension and view port\n   * @param type - dimension type\n   * @param sizes - new custom sizes\n   * @param keepOld - keep old sizes merge new with old\n   */\n  setCustomSizes(\n    type: MultiDimensionType,\n    sizes: ViewSettingSizeProp,\n    keepOld = false,\n  ) {\n    let newSizes = sizes;\n    if (keepOld) {\n      const oldSizes = this.stores[type].store.get('sizes');\n      newSizes = {\n        ...oldSizes,\n        ...sizes,\n      };\n    }\n    this.stores[type].setDimensionSize(newSizes);\n    this.setViewPortCoordinate({\n      type,\n      force: true,\n    });\n  }\n\n  setItemCount(realCount: number, type: MultiDimensionType) {\n    this.viewports.stores[type].setViewport({ realCount });\n    this.stores[type].setStore({ count: realCount });\n  }\n\n  /**\n   * Apply trimmed items\n   * @param trimmed - trimmed items\n   * @param type\n   */\n  setTrimmed(trimmed: Trimmed, type: MultiDimensionType) {\n    const allTrimmed = gatherTrimmedItems(trimmed);\n    const dimStoreType = this.stores[type];\n    dimStoreType.setStore({ trimmed: allTrimmed });\n    this.setViewPortCoordinate({\n      type,\n      force: true,\n    });\n  }\n\n  /**\n   * Sets dimension data and viewport coordinate\n   * @param itemCount\n   * @param type - dimension type\n   * @param noVirtual - disable virtual data\n   */\n  setData(itemCount: number, type: MultiDimensionType, noVirtual = false) {\n    this.setItemCount(itemCount, type);\n\n    // Virtualization will get disabled\n    if (noVirtual) {\n      const dimension = this.stores[type].getCurrentState();\n      this.viewports.stores[type].setViewport({\n        virtualSize: dimension.realSize,\n      });\n    }\n    this.setViewPortCoordinate({\n      type,\n    });\n  }\n\n  /**\n   * Applies new columns to the dimension provider\n   * @param columns - new columns data\n   * @param disableVirtualX - disable virtual data for X axis\n   */\n  applyNewColumns(\n    columns: Record<DimensionCols, ColumnRegular[]>,\n    disableVirtualX: boolean,\n    keepOld = false,\n  ) {\n    // Apply new columns to dimension provider\n    for (let type of columnTypes) {\n      if (!keepOld) {\n        // Clear existing data in the dimension provider\n        this.stores[type].drop();\n      }\n\n      // Get the new columns for the current type\n      const items = columns[type];\n\n      // Determine if virtual data should be disabled for the current type\n      const noVirtual = type !== 'rgCol' || disableVirtualX;\n\n      // Set the items count in the dimension provider\n      this.stores[type].setStore({ count: items.length });\n\n      // Set the custom sizes for the columns\n      const newSizes = getColumnSizes(items);\n      this.stores[type].setDimensionSize(newSizes);\n\n      // Update the viewport with new data\n      const vpUpdate: Partial<ViewportState> = {\n        // This triggers drop on realCount change\n        realCount: items.length,\n      };\n\n      // If virtual data is disabled, set the virtual size to the real size\n      if (noVirtual) {\n        vpUpdate.virtualSize = this.stores[type].getCurrentState().realSize;\n      }\n\n      // Update the viewport\n      this.viewports.stores[type].setViewport(vpUpdate);\n      this.setViewPortCoordinate({\n        type,\n      });\n    }\n  }\n\n  /**\n   * Gets the full size of the grid by summing up the sizes of all dimensions\n   * Goes through all dimensions columnTypes (x) and rowTypes (y) and sums up their sizes\n   */\n\n  getFullSize(): { x: number; y: number } {\n    let x = 0;\n    let y = 0;\n    for (let type of columnTypes) {\n      x += this.stores[type]?.store.get('realSize') || 0;\n    }\n    for (let type of rowTypes) {\n      y += this.stores[type]?.store.get('realSize') || 0;\n    }\n    return { y, x };\n  }\n\n  setViewPortCoordinate({\n    type,\n    coordinate = this.viewports.stores[type].lastCoordinate,\n    force = false,\n  }: {\n    coordinate?: number;\n    type: MultiDimensionType;\n    force?: boolean;\n  }) {\n    const dimension = this.stores[type].getCurrentState();\n    this.viewports.stores[type].setViewPortCoordinate(\n      coordinate,\n      dimension,\n      force,\n    );\n  }\n\n  getViewPortPos(e: ViewPortScrollEvent): number {\n    const dimension = this.stores[e.dimension].getCurrentState();\n    const item = getItemByIndex(dimension, e.coordinate);\n\n    return item.start;\n  }\n\n  setSettings(\n    data: Partial<DimensionSettingsState>,\n    dimensionType: DimensionType,\n  ) {\n    let stores: MultiDimensionType[] = [];\n    switch (dimensionType) {\n      case 'rgCol':\n        stores = columnTypes;\n        break;\n      case 'rgRow':\n        stores = rowTypes;\n        break;\n    }\n    for (let s of stores) {\n      this.stores[s].setStore(data);\n    }\n  }\n\n  updateSizesPositionByNewDataIndexes(\n    type: MultiDimensionType,\n    newItemsOrder: number[],\n    prevItemsOrder: number[] = [],\n  ) {\n    // Move custom sizes to new order\n    this.stores[type].updateSizesPositionByIndexes(\n      newItemsOrder,\n      prevItemsOrder,\n    );\n    this.setViewPortCoordinate({\n      type,\n      force: true,\n    });\n  }\n}\n", "import reduce from 'lodash/reduce';\nimport { columnTypes, rowTypes, type ViewportStoreCollection, ViewportStore } from '@store';\nimport type { MultiDimensionType, ViewportState } from '@type';\n\n\nexport default class ViewportProvider {\n  readonly stores: ViewportStoreCollection;\n  constructor() {\n    this.stores = reduce(\n      [...rowTypes, ...columnTypes],\n      (sources: Partial<ViewportStoreCollection>, k: MultiDimensionType) => {\n        sources[k] = new ViewportStore(k);\n        return sources;\n      },\n      {},\n    ) as ViewportStoreCollection;\n  }\n\n  setViewport(type: MultiDimensionType, data: Partial<ViewportState>) {\n    this.stores[type].setViewport(data);\n  }\n}\n", "import DimensionProvider from '../../services/dimension.provider';\nimport { type SelectionStoreConnector } from '../../services/selection.store.connector';\nimport ViewportProvider from '../../services/viewport.provider';\nimport { columnTypes, DSourceState, getSourceItem, getVisibleSourceItem, rowTypes } from '@store';\nimport { OrdererService } from '../order/order-renderer';\nimport GridScrollingService from './viewport.scrolling.service';\nimport { CONTENT_SLOT, FOOTER_SLOT, HEADER_SLOT, viewportDataPartition, VPPartition } from './viewport.helpers';\n\nimport ColumnDataProvider from '../../services/column.data.provider';\nimport { DataProvider } from '../../services/data.provider';\nimport type {\n  AllDimensionType,\n  Cell,\n  ColumnRegular,\n  DimensionCols,\n  DimensionRows,\n  HeaderProperties,\n  RangeArea,\n  SlotType,\n  ViewportColumn,\n  ViewportData,\n  ViewportProperties,\n  ViewportProps,\n  ViewPortResizeEvent,\n  ViewportState,\n  ViewSettingSizeProp,\n} from '@type';\nimport { Observable } from '../../utils';\n\nexport type ResizeDetails = { [index: number]: ColumnRegular };\ntype Config = {\n  columnProvider: ColumnDataProvider;\n  dataProvider: DataProvider;\n  dimensionProvider: DimensionProvider;\n  viewportProvider: ViewportProvider;\n  scrollingService: GridScrollingService;\n  orderService: OrdererService;\n  selectionStoreConnector: SelectionStoreConnector;\n\n  disableVirtualX?: boolean;\n  disableVirtualY?: boolean;\n\n  resize(r: ResizeDetails): void;\n};\n\nexport type FocusedData = {\n  model: any;\n  cell: Cell;\n  colType: DimensionCols;\n  rowType: DimensionRows;\n  column?: ColumnRegular;\n};\n\n/** Collect Column data */\nfunction gatherColumnData(data: ViewportColumn) {\n  const colDimension = data.dimensions[data.colType].store;\n  const realWidth = colDimension.get('realSize');\n\n  const prop: ViewportProperties = {\n    contentWidth: realWidth,\n    class: data.colType,\n    contentHeight: data.contentHeight,\n    key: data.colType,\n    colType: data.colType,\n    onResizeviewport: data.onResizeviewport,\n    // set viewport size to real size\n    style: data.fixWidth ? { minWidth: `${realWidth}px` } : undefined,\n  };\n\n  const headerProp: HeaderProperties = {\n    colData: getVisibleSourceItem(data.colStore),\n    dimensionCol: colDimension,\n    type: data.colType,\n    groups: data.colStore.get('groups'),\n    groupingDepth: data.colStore.get('groupingDepth'),\n    resizeHandler: data.colType === 'colPinEnd' ? ['l'] : undefined,\n    onHeaderresize: data.onHeaderresize,\n  };\n\n  return {\n    prop,\n    type: data.colType,\n    position: data.position,\n    headerProp,\n    viewportCol: data.viewports[data.colType].store,\n  };\n}\n\nexport default class ViewportService {\n  readonly columns: ViewportProps[];\n  constructor(\n    private config: Config,\n    contentHeight: number,\n  ) {\n    // ----------- Handle columns ----------- //\n\n    // Transform data from stores and apply it to different components\n    const columns: ViewportProps[] = [];\n    let x = 0; // we increase x only if column present\n    columnTypes.forEach(val => {\n      const colStore = config.columnProvider.stores[val].store;\n      // only columns that have data show\n      if (!colStore.get('items').length) {\n        return;\n      }\n      const column: ViewportColumn = {\n        colType: val,\n        position: { x, y: 1 },\n\n        contentHeight,\n        // only central column has dynamic width\n        fixWidth: val !== 'rgCol',\n\n        viewports: config.viewportProvider.stores,\n        dimensions: config.dimensionProvider.stores,\n        rowStores: config.dataProvider.stores,\n\n        colStore,\n        onHeaderresize: e => this.onColumnResize(val, e, colStore),\n      };\n      if (val === 'rgCol') {\n        column.onResizeviewport = (e: CustomEvent<ViewPortResizeEvent>) => {\n          const vpState: Partial<ViewportState> = {\n            clientSize: e.detail.size,\n          };\n\n          // virtual size will be handled by dimension provider if disabled\n          if ((e.detail.dimension === 'rgRow' && !config.disableVirtualY)\n              || (e.detail.dimension === 'rgCol' && !config.disableVirtualX)) {\n                vpState.virtualSize = e.detail.size;\n          }\n          config.viewportProvider?.setViewport(e.detail.dimension, vpState);\n        };\n      }\n      const colData = gatherColumnData(column);\n      const columnSelectionStore = this.registerCol(colData.position.x, val);\n\n      // render per each column data collections vertically\n      const dataPorts = this.dataViewPort(column).reduce<ViewportData[]>(\n        (r, rgRow) => {\n          // register selection store for Segment\n          const segmentSelection = this.registerSegment(rgRow.position, rgRow.lastCell);\n\n          // register selection store for Row\n          const rowSelectionStore = this.registerRow(\n            rgRow.position.y,\n            rgRow.type,\n          );\n          const rowDef: ViewportData = {\n            colType: val,\n            ...rgRow,\n            rowSelectionStore,\n            selectionStore: segmentSelection.store,\n            onSetrange: e => {\n              segmentSelection.setRangeArea(e.detail);\n            },\n            onSettemprange: e => segmentSelection.setTempArea(e.detail),\n            onFocuscell: e => {\n              // todo: multi focus\n              segmentSelection.clearFocus();\n              config.selectionStoreConnector.focus(segmentSelection, e.detail);\n            },\n          };\n          r.push(rowDef);\n          return r;\n        },\n        [],\n      );\n      columns.push({\n        ...colData,\n        columnSelectionStore,\n        dataPorts,\n      });\n      x++;\n    });\n    this.columns = columns;\n    // ----------- Handle columns end ----------- //\n\n    this.config.scrollingService?.unregister();\n  }\n\n  private onColumnResize(\n    type: DimensionCols,\n    { detail }: CustomEvent<ViewSettingSizeProp>,\n    store: Observable<DSourceState<ColumnRegular, DimensionCols>>,\n  ) {\n    // apply to dimension provider\n    this.config.dimensionProvider?.setCustomSizes(type, detail, true);\n\n    // set resize event\n    const changedItems: ResizeDetails = {};\n    for (const [i, size] of Object.entries(detail || {})) {\n      const virtualIndex = parseInt(i, 10);\n      const item = getSourceItem(store, virtualIndex);\n      if (item) {\n        changedItems[virtualIndex] = { ...item, size };\n      }\n    }\n    this.config.resize(changedItems);\n  }\n\n  /** register selection store for Segment */\n  private registerSegment(position: Cell, lastCell: Cell) {\n    const store = this.config.selectionStoreConnector.register(position);\n    store.setLastCell(lastCell);\n    return store;\n  }\n\n  /** register selection store for Row */\n  private registerRow(y: number, type: DimensionRows) {\n    return this.config.selectionStoreConnector.registerRow(y, type).store;\n  }\n\n  /** register selection store for Column */\n  private registerCol(x: number, type: DimensionCols) {\n    return this.config.selectionStoreConnector.registerColumn(x, type).store;\n  }\n\n  /** Collect Row data */\n  private dataViewPort(data: ViewportColumn) {\n    const slots: { [key in DimensionRows]: SlotType } = {\n      rowPinStart: HEADER_SLOT,\n      rgRow: CONTENT_SLOT,\n      rowPinEnd: FOOTER_SLOT,\n    };\n\n    // y position for selection\n    let y = 0;\n    return rowTypes.reduce((result: VPPartition[], type) => {\n      const rgCol = {\n        ...data,\n        position: { ...data.position, y },\n      };\n      const partition = viewportDataPartition(\n        rgCol,\n        type,\n        slots[type],\n        type !== 'rgRow', // is fixed row\n      );\n      result.push(partition);\n      y++;\n      return result;\n    }, []);\n  }\n\n  scrollToCell(cell: Partial<Cell>) {\n    for (let key in cell) {\n      const coordinate = cell[key as keyof Cell];\n      if (typeof coordinate === 'number') {\n        this.config.scrollingService.proxyScroll({\n          dimension: key === 'x' ? 'rgCol' : 'rgRow',\n          coordinate,\n        });\n      }\n    }\n  }\n\n  /**\n   * Clear current grid focus\n   */\n  clearFocused() {\n    this.config.selectionStoreConnector.clearAll();\n  }\n\n  clearEdit() {\n    this.config.selectionStoreConnector.setEdit(false);\n  }\n\n  /**\n   * Collect focused element data\n   */\n  getFocused(): FocusedData | null {\n    const focused = this.config.selectionStoreConnector.focusedStore;\n    if (!focused) {\n      return null;\n    }\n    // get column data\n    const colType =\n      this.config.selectionStoreConnector.storesXToType[focused.position.x];\n    const column = this.config.columnProvider.getColumn(\n      focused.cell.x,\n      colType,\n    );\n\n    // get row data\n    const rowType =\n      this.config.selectionStoreConnector.storesYToType[focused.position.y];\n    const model = this.config.dataProvider.getModel(focused.cell.y, rowType);\n    return {\n      column,\n      model,\n      cell: focused.cell,\n      colType,\n      rowType,\n    };\n  }\n\n  getStoreCoordinateByType(colType: DimensionCols, rowType: DimensionRows): Cell | undefined {\n    const stores = this.config.selectionStoreConnector.storesByType;\n    if (typeof stores[colType] === 'undefined' || typeof stores[rowType] === 'undefined') {\n      return;\n    }\n    return {\n      x: stores[colType],\n      y: stores[rowType],\n    };\n  }\n\n  setFocus(colType: string, rowType: string, start: Cell, end: Cell) {\n    const coordinate = this.getStoreCoordinateByType(colType as DimensionCols, rowType as DimensionRows);\n    if (coordinate) {\n      this.config.selectionStoreConnector?.focusByCell(\n        coordinate,\n        start,\n        end,\n      );\n    }\n  }\n\n  getSelectedRange(): RangeArea & AllDimensionType | null | undefined {\n\n    const focused = this.config.selectionStoreConnector.focusedStore;\n    if (!focused) {\n      return null;\n    }\n    // get column data\n    const colType =\n      this.config.selectionStoreConnector.storesXToType[focused.position.x];\n\n    // get row data\n    const rowType =\n      this.config.selectionStoreConnector.storesYToType[focused.position.y];\n\n    const range = focused.entity.store.get('range');\n    if (!range) {\n      return null;\n    }\n    return {\n      ...range,\n      colType,\n      rowType,\n    }\n  }\n\n  setEdit(\n    rowIndex: number,\n    colIndex: number,\n    colType: DimensionCols,\n    rowType: DimensionRows,\n  ) {\n    const coordinate = this.getStoreCoordinateByType(colType as DimensionCols, rowType as DimensionRows);\n    if (coordinate) {\n      this.config.selectionStoreConnector?.setEditByCell(\n        coordinate,\n        { x: colIndex, y: rowIndex },\n      );\n    }\n  }\n}\n", "import { columnTypes } from '@store';\nimport {\n  DimensionColPin,\n  ViewPortScrollEvent,\n  ElementsScroll,\n  ElementScroll,\n} from '@type';\n\nexport default class GridScrollingService {\n  private elements: ElementsScroll = {};\n  constructor(private setViewport: (e: ViewPortScrollEvent) => void) {}\n\n  async proxyScroll(e: ViewPortScrollEvent, key?: DimensionColPin | string) {\n    let newEventPromise: Promise<ViewPortScrollEvent | undefined> | undefined;\n    let event = e;\n    for (let elKey in this.elements) {\n      // skip\n      if (e.dimension === 'rgCol' && elKey === 'headerRow') {\n        continue;\n        // pinned column only\n      } else if (this.isPinnedColumn(key) && e.dimension === 'rgCol') {\n        if (elKey === key || !e.delta) {\n          continue;\n        }\n        for (let el of this.elements[elKey]) {\n          if (el.changeScroll) {\n            newEventPromise = el.changeScroll(e);\n          }\n        }\n      } else {\n        for (let el of this.elements[elKey]) {\n          await el.setScroll?.(e);\n        }\n      }\n    }\n    const newEvent = await newEventPromise;\n    if (newEvent) {\n      event = newEvent;\n    }\n    this.setViewport(event);\n  }\n\n  /**\n   * Silent scroll update for mobile devices when we have negative scroll top\n   */\n  async scrollSilentService(\n    e: ViewPortScrollEvent,\n    key?: DimensionColPin | string,\n  ) {\n    for (let elKey in this.elements) {\n      // skip same element update\n      if (elKey === key) {\n        continue;\n      }\n      if (\n        columnTypes.includes(key as DimensionColPin) &&\n        (elKey === 'headerRow' ||\n          columnTypes.includes(elKey as DimensionColPin))\n      ) {\n        for (let el of this.elements[elKey]) {\n          await el.changeScroll?.(e, true);\n        }\n        continue;\n      }\n    }\n  }\n\n  private isPinnedColumn(\n    key?: DimensionColPin | string,\n  ): key is DimensionColPin {\n    return !!key && ['colPinStart', 'colPinEnd'].indexOf(key) > -1;\n  }\n\n  registerElements(els: ElementsScroll) {\n    this.elements = els;\n  }\n\n  /**\n   * Register new element for farther scroll support\n   * @param el - can be null if holder removed\n   * @param key - element key\n   */\n  registerElement(el: ElementScroll | null | undefined, key: string) {\n    if (!this.elements[key]) {\n      this.elements[key] = [];\n    }\n    // new element added\n    if (el) {\n      this.elements[key].push(el);\n    } else if (this.elements[key]) {\n      // element removed\n      delete this.elements[key];\n    }\n  }\n\n  unregister() {\n    this.elements = {};\n  }\n}\n", "import { cropCellToMax, nextCell, SelectionStore } from '@store';\nimport type {\n  MultiDimensionType,\n  DimensionCols,\n  DimensionRows,\n  Cell,\n  EditCellStore,\n  RangeArea,\n} from '@type';\n\ntype StoreByDimension = Record<number, SelectionStore>;\ntype FocusedStore = {\n  entity: SelectionStore;\n  cell: Cell;\n  position: Cell;\n};\n\ntype StoresMapping<T> = { [xOrY: number]: Partial<T> };\n\nexport class SelectionStoreConnector {\n  readonly stores: { [y: number]: { [x: number]: SelectionStore } } = {};\n\n  readonly columnStores: StoreByDimension = {};\n  readonly rowStores: { [y: number]: SelectionStore } = {};\n\n  /**\n   * Helpers for data conversion\n   */\n  readonly storesByType: Partial<Record<MultiDimensionType, number>> = {};\n  readonly storesXToType: StoresMapping<DimensionCols> = {};\n  readonly storesYToType: StoresMapping<DimensionRows> = {};\n\n  get focusedStore(): FocusedStore | null {\n    for (let y in this.stores) {\n      for (let x in this.stores[y]) {\n        const focused = this.stores[y][x]?.store.get('focus');\n        if (focused) {\n          return {\n            entity: this.stores[y][x],\n            cell: focused,\n            position: {\n              x: parseInt(x, 10),\n              y: parseInt(y, 10),\n            },\n          };\n        }\n      }\n    }\n    return null;\n  }\n\n  get edit(): EditCellStore | null | undefined {\n    return this.focusedStore?.entity.store.get('edit');\n  }\n\n  get focused(): Cell | null | undefined {\n    return this.focusedStore?.entity.store.get('focus');\n  }\n\n  get selectedRange(): RangeArea | null | undefined {\n    return this.focusedStore?.entity.store.get('range');\n  }\n\n  registerColumn(x: number, type: DimensionCols): SelectionStore {\n    if (this.columnStores[x]) {\n      return this.columnStores[x];\n    }\n    this.columnStores[x] = new SelectionStore();\n    // build cross-linking type to position\n    this.storesByType[type] = x;\n    this.storesXToType[x] = type;\n    return this.columnStores[x];\n  }\n\n  registerRow(y: number, type: DimensionRows): SelectionStore {\n    if (this.rowStores[y]) {\n      return this.rowStores[y];\n    }\n    this.rowStores[y] = new SelectionStore();\n    // build cross linking type to position\n    this.storesByType[type] = y;\n    this.storesYToType[y] = type;\n    return this.rowStores[y];\n  }\n\n  /**\n   * Cross store proxy, based on multiple dimensions\n   */\n  register({ x, y }: Cell): SelectionStore {\n    if (!this.stores[y]) {\n      this.stores[y] = {};\n    }\n    let store = this.stores[y][x];\n    if (store) {\n      // Store already registered. Do not register twice\n      return store;\n    }\n    this.stores[y][x] = store = new SelectionStore();\n    // proxy update, column store trigger only range area\n    store.onChange('range', c => {\n      this.columnStores[x].setRangeArea(c);\n      this.rowStores[y].setRangeArea(c);\n    });\n    // clean up on remove\n    store.store.on('dispose', () => this.destroy(x, y));\n    return store;\n  }\n\n  private destroy(x: number, y: number) {\n    this.columnStores[x]?.dispose();\n    this.rowStores[y]?.dispose();\n\n    delete this.rowStores[y];\n    delete this.columnStores[x];\n    // clear x cross-link\n    if (this.storesXToType[x]) {\n      const type = this.storesXToType[x];\n      delete this.storesXToType[x];\n      delete this.storesByType[type];\n    }\n    // clear y cross-link\n    if (this.storesYToType[y]) {\n      const type = this.storesYToType[y];\n      delete this.storesYToType[y];\n      delete this.storesByType[type];\n    }\n    if (this.stores[y]) {\n      delete this.stores[y][x];\n    }\n    // clear empty rows\n    if (!Object.keys(this.stores[y] || {}).length) {\n      delete this.stores[y];\n    }\n  }\n\n  setEditByCell<T extends Cell>(storePos: T, editCell: T) {\n    this.focusByCell(storePos, editCell, editCell);\n    this.setEdit('');\n  }\n\n  /**\n   * Sets the next focus cell before the current one.\n   * \n   * @param focus - The cell to set as the next focus.\n   */\n  beforeNextFocusCell(focus: Cell) {\n    // If there is no focused store, return early.\n    if (!this.focusedStore) {\n      return;\n    }\n\n    // Get the next store based on the current focus and the last cell.\n    const lastCell = this.focusedStore.entity.store.get('lastCell');\n    const next = lastCell && this.getNextStore(focus, this.focusedStore.position, lastCell);\n\n    // Set the next focus cell in the store.\n    next?.store?.setNextFocus({ ...focus, ...next.item });\n  }\n\n  focusByCell<T extends Cell>(storePos: T, start: T, end: T) {\n    const store = this.stores[storePos.y][storePos.x];\n    this.focus(store, { focus: start, end });\n  }\n\n  focus(store: SelectionStore, { focus, end }: { focus: Cell; end: Cell }) {\n    const currentStorePointer = this.getCurrentStorePointer(store);\n    if (!currentStorePointer) {\n      return null;\n    }\n\n    // check for the focus in nearby store/viewport\n    const lastCell = store.store.get('lastCell');\n    const next = lastCell && this.getNextStore(focus, currentStorePointer, lastCell);\n\n    // if next store present - update\n    if (next?.store) {\n      const item = { ...focus, ...next.item };\n      this.focus(next.store, { focus: item, end: item });\n      return null;\n    }\n\n    if (lastCell) {\n      focus = cropCellToMax(focus, lastCell);\n      end = cropCellToMax(end, lastCell);  \n    }\n    store.setFocus(focus, end);\n    return focus;\n  }\n\n  /**\n   * Retrieves the current store pointer based on the active store.\n   * Clears focus from all stores except the active one.\n   */\n  getCurrentStorePointer(store: SelectionStore) {\n    let currentStorePointer: Cell | undefined;\n\n    // Iterate through all stores\n    for (let y in this.stores) {\n      for (let x in this.stores[y]) {\n        const s = this.stores[y][x];\n\n        // Clear focus from stores other than the active one\n        if (s !== store) {\n          s.clearFocus();\n        } else {\n          // Update the current store pointer with the active store coordinates\n          currentStorePointer = { \n            x: parseInt(x, 10), \n            y: parseInt(y, 10) \n          };\n        }\n      }\n    }\n\n    return currentStorePointer;\n  }\n\n  /**\n   * Retrieves the next store based on the focus cell and current store pointer.\n   * If the next store exists, returns an object with the next store and the item in the new store.\n   * If the next store does not exist, returns null.\n   */\n  getNextStore(\n    focus: Cell,\n    currentStorePointer: Cell,\n    lastCell: Cell,\n  ) {\n    // item in new store\n    const nextItem: Partial<Cell> | null = nextCell(focus, lastCell);\n\n    let nextStore: SelectionStore | undefined;\n    if (nextItem) {\n      Object.entries(nextItem).forEach(([type, nextItemCoord]: [keyof Cell, number]) => {\n        let stores;\n        switch (type) {\n          case 'x':\n            // Get the X stores for the current Y coordinate of the current store pointer\n            stores = this.getXStores(currentStorePointer.y);\n            break;\n          case 'y':\n            // Get the Y stores for the current X coordinate of the current store pointer\n            stores = this.getYStores(currentStorePointer.x);\n            break;\n        }\n\n        // Get the next store based on the item in the new store\n        if (nextItemCoord >= 0) {\n          nextStore = stores[++currentStorePointer[type]];\n        } else {\n          nextStore = stores[--currentStorePointer[type]];\n          const nextLastCell = nextStore?.store.get('lastCell');\n          if (nextLastCell) {\n            nextItem[type] = nextLastCell[type] + nextItemCoord;\n          }\n        }\n    });\n    }\n    // if last cell is empty store is empty, no next store\n    const lastCellNext = nextStore?.store.get('lastCell');\n    if (!lastCellNext?.x || !lastCellNext?.y) {\n      nextStore = undefined;\n    }\n    return {\n      store: nextStore,\n      item: nextItem,\n    };\n  }\n\n  clearAll() {\n    for (let y in this.stores) {\n      for (let x in this.stores[y]) {\n        this.stores[y][x]?.clearFocus();\n      }\n    }\n  }\n\n  setEdit(val?: string | boolean) {\n    if (!this.focusedStore) {\n      return;\n    }\n    this.focusedStore.entity.setEdit(val);\n  }\n\n  /**\n   * Select all cells across all stores\n   */\n  selectAll() {\n    for (let y in this.stores) {\n      for (let x in this.stores[y]) {\n        const store = this.stores[y][x];\n        if (!store) {\n          continue;\n        }\n        const lastCell = store.store.get('lastCell');\n        if (lastCell) {\n          store.setRange(\n            { x: 0, y: 0 },\n            { x: lastCell.x - 1, y: lastCell.y - 1 },\n          );\n        }\n      }\n    }\n  }\n\n  private getXStores(y: number) {\n    return this.stores[y];\n  }\n\n  private getYStores(x: number) {\n    const stores: { [p: number]: SelectionStore } = {};\n    for (let i in this.stores) {\n      stores[i] = this.stores[i][x];\n    }\n    return stores;\n  }\n}\n", "import { h, type VNode } from '@stencil/core';\nimport { PositionItem } from '@type';\nimport { Cell } from '@type';\n\ntype Props = { ref: { (e: OrdererService): void } };\n\n/**\n * Draw drag\n */\nexport class OrdererService {\n  private parentY = 0;\n  el?: HTMLElement;\n  rgRow?: HTMLElement;\n  text?: HTMLElement;\n  draggable?: HTMLElement;\n\n  start(parent: HTMLElement, { pos, text, event }: { pos: PositionItem; text: string; event: MouseEvent }) {\n    const { top } = parent.getBoundingClientRect();\n    this.parentY = top;\n    if (this.text) {\n      this.text.innerText = text;\n    }\n    this.move(pos);\n    this.moveTip({ x: event.x, y: event.y });\n    this.el?.classList.remove('hidden');\n  }\n  end() {\n    this.el?.classList.add('hidden');\n  }\n  move(pos: PositionItem) {\n    this.moveElement(pos.end - this.parentY);\n  }\n  moveTip({ x, y }: Cell) {\n    if (!this.draggable) {\n      return;\n    }\n    this.draggable.style.left = `${x}px`;\n    this.draggable.style.top = `${y}px`;\n  }\n\n  private moveElement(y: number) {\n    if (!this.rgRow) {\n      return;\n    }\n    this.rgRow.style.transform = `translateY(${y}px)`;\n  }\n}\n\nconst OrderRenderer = ({ ref }: Props): VNode[] => {\n  const service = new OrdererService();\n  ref(service);\n  return (\n    <div class=\"draggable-wrapper hidden\" ref={e => (service.el = e)}>\n      <div class=\"draggable\" ref={el => (service.draggable = el)}>\n        <span class=\"revo-alt-icon\" />\n        <span ref={e => (service.text = e)} />\n      </div>\n      <div class=\"drag-position\" ref={e => (service.rgRow = e)} />\n    </div>\n  );\n};\nexport default OrderRenderer;\n", "import { RowDefinition, DimensionRows } from '@type';\n\ntype Result = Partial<{\n  [T in DimensionRows]: { sizes?: Record<number, number>; };\n}>;\ntype RemoveResult = Partial<{\n  [T in DimensionRows]: number[];\n}>;\nexport const rowDefinitionByType = (newVal: RowDefinition[] = []) => {\n  const result: Result = {};\n  for (const v of newVal) {\n    let rowDefs = result[v.type];\n    if (!rowDefs) {\n      rowDefs = result[v.type] = {};\n    }\n    if (v.size) {\n      if (!rowDefs.sizes) {\n        rowDefs.sizes = {};\n      }\n      rowDefs.sizes[v.index] = v.size;\n    }\n  }\n  return result;\n};\n\nexport const rowDefinitionRemoveByType = (oldVal: RowDefinition[] = []) => {\n  const result: RemoveResult = {};\n  for (const v of oldVal) {\n    let rowDefs = result[v.type];\n    if (!rowDefs) {\n      rowDefs = result[v.type] = [];\n    }\n    if (v.size) {\n      rowDefs.push(v.index);\n    }\n  }\n  return result;\n};\n", "export function isMobileDevice() {\n    return /Mobi/i.test(navigator.userAgent) || /Android/i.test(navigator.userAgent) || navigator.maxTouchPoints > 0;\n}\n", "import { CellProps, PluginProviders } from '@type';\nimport { BasePlugin } from '../base.plugin';\nimport { ColumnCollection } from 'src/utils';\n\n/**\n * WCAG Plugin is responsible for enhancing the accessibility features of the RevoGrid component.\n * It ensures that the grid is fully compliant with Web Content Accessibility Guidelines (WCAG) 2.1.\n * This plugin should be the last plugin you add, as it modifies the grid's default behavior.\n *\n * The WCAG Plugin performs the following tasks:\n * - Sets the 'dir' attribute to 'ltr' for left-to-right text direction.\n * - Sets the 'role' attribute to 'treegrid' for treelike hierarchical structure.\n * - Sets the 'aria-keyshortcuts' attribute to 'Enter' and 'Esc' for keyboard shortcuts.\n * - Adds event listeners for keyboard navigation and editing.\n *\n * By default, the plugin adds ARIA roles and properties to the grid elements, providing semantic information\n * for assistive technologies. These roles include 'grid', 'row', and 'gridcell'. The plugin also sets\n * ARIA attributes such as 'aria-rowindex', 'aria-colindex', and 'aria-selected'.\n *\n * The WCAG Plugin ensures that the grid is fully functional and usable for users with various disabilities,\n * including visual impairments, deaf-blindness, and cognitive disabilities.\n *\n * Note: The WCAG Plugin should be added as the last plugin in the list of plugins, as it modifies the grid's\n * default behavior and may conflict with other plugins if added earlier.\n */\nexport class WCAGPlugin extends BasePlugin {\n  constructor(revogrid: HTMLRevoGridElement, providers: PluginProviders) {\n    super(revogrid, providers);\n\n    revogrid.setAttribute('role', 'treegrid');\n    revogrid.setAttribute('aria-keyshortcuts', 'Enter');\n    revogrid.setAttribute('aria-multiselectable', 'true');\n    revogrid.setAttribute('tabindex', '0');\n\n    /**\n     * Before Columns Set Event\n     */\n    this.addEventListener(\n      'beforecolumnsset',\n      ({ detail }: CustomEvent<ColumnCollection>) => {\n        const columns = [\n          ...detail.columns.colPinStart,\n          ...detail.columns.rgCol,\n          ...detail.columns.colPinEnd,\n        ];\n\n        revogrid.setAttribute('aria-colcount', `${columns.length}`);\n\n        columns.forEach((column, index) => {\n          const { columnProperties, cellProperties } = column;\n\n          column.columnProperties = (...args) => {\n            const result = columnProperties?.(...args) || {};\n\n            result.role = 'columnheader';\n            result['aria-colindex'] = `${index}`;\n\n            return result;\n          };\n\n          column.cellProperties = (...args) => {\n            const wcagProps: CellProps = {\n              ['role']: 'gridcell',\n              ['aria-colindex']: `${index}`,\n              ['aria-rowindex']: `${args[0].rowIndex}`,\n              ['tabindex']: -1,\n            };\n            const columnProps: CellProps = cellProperties?.(...args) || {};\n\n            return {\n              ...wcagProps,\n              ...columnProps,\n            };\n          };\n        });\n      },\n    );\n\n    /**\n     * Before Row Set Event\n     */\n    this.addEventListener(\n      'beforesourceset',\n      ({\n        detail,\n      }: CustomEvent<HTMLRevoGridElementEventMap['beforesourceset']>) => {\n        revogrid.setAttribute('aria-rowcount', `${detail.source.length}`);\n      },\n    );\n    this.addEventListener(\n      'beforerowrender',\n      ({\n        detail,\n      }: CustomEvent<HTMLRevogrDataElementEventMap['beforerowrender']>) => {\n        detail.node.$attrs$ = {\n          ...detail.node.$attrs$,\n          role: 'row',\n          ['aria-rowindex']: detail.item.itemIndex,\n        };\n      },\n    );\n\n    // focuscell\n    this.addEventListener(\n      'afterfocus',\n      async (\n        e: CustomEvent<HTMLRevogrFocusElementEventMap['afterfocus']>,\n      ) => {\n        if (e.defaultPrevented) {\n          return;\n        }\n        const el = this.revogrid.querySelector(\n          `revogr-data[type=\"${e.detail.rowType}\"][col-type=\"${e.detail.colType}\"] [data-rgrow=\"${e.detail.rowIndex}\"][data-rgcol=\"${e.detail.colIndex}\"]`,\n        );\n        if (el instanceof HTMLElement) {\n          el.focus();\n        }\n      },\n    );\n  }\n}\n", "import { PluginBaseComponent, PluginProviders, PluginServiceBase } from '@type';\nimport { GridPlugin } from 'src/plugins';\n\n/**\n * Plugin service\n * Manages plugins\n */\nexport class PluginService implements PluginServiceBase {\n  /**\n   * Plugins\n   * Define plugins collection\n   */\n  internalPlugins: PluginBaseComponent[] = [];\n\n  /**\n   * Get all plugins\n   */\n  get() {\n    return [...this.internalPlugins];\n  }\n\n  /**\n   * Add plugin to collection\n   */\n  add(plugin: PluginBaseComponent) {\n    this.internalPlugins.push(plugin);\n  }\n\n  /**\n   * Add user plugins and create\n   */\n  addUserPluginsAndCreate(\n    element: HTMLRevoGridElement,\n    plugins: GridPlugin[] = [],\n    prevPlugins?: GridPlugin[],\n    pluginData?: PluginProviders,\n  ) {\n    if (!pluginData) {\n      return;\n    }\n\n    // Step 1: Identify plugins to remove, compare new and old plugins\n    const pluginsToRemove =\n      prevPlugins?.filter(\n        prevPlugin => !plugins.some(userPlugin => userPlugin === prevPlugin),\n      ) || [];\n\n    // Step 2: Remove old plugins\n    pluginsToRemove.forEach(plugin => {\n      const index = this.internalPlugins.findIndex(\n        createdPlugin => createdPlugin instanceof plugin,\n      );\n      if (index !== -1) {\n        this.internalPlugins[index].destroy?.();\n        this.internalPlugins.splice(index, 1); // Remove the plugin\n      }\n    });\n\n    // Step 3: Register user plugins\n    plugins?.forEach(userPlugin => {\n      // check if plugin already exists, if so, skip\n      const existingPlugin = this.internalPlugins.find(\n        createdPlugin => createdPlugin instanceof userPlugin,\n      );\n      if (existingPlugin) {\n        return;\n      }\n      this.add(new userPlugin(element, pluginData));\n    });\n  }\n\n  /**\n   * Get plugin by class\n   */\n  getByClass<T extends PluginBaseComponent>(\n    pluginClass: new (...args: any[]) => T,\n  ): T | undefined {\n    return this.internalPlugins.find(p => p instanceof pluginClass) as\n      | T\n      | undefined;\n  }\n\n  /**\n   * Remove plugin\n   */\n  remove(plugin: PluginBaseComponent) {\n    const index = this.internalPlugins.indexOf(plugin);\n    if (index > -1) {\n      this.internalPlugins[index].destroy?.();\n      this.internalPlugins.splice(index, 1);\n    }\n  }\n\n  /**\n   * Remove all plugins\n   */\n\n  destroy() {\n    this.internalPlugins.forEach(p => p.destroy?.());\n    this.internalPlugins = [];\n  }\n}\n", "import { BasePlugin } from '../base.plugin';\nimport type { PluginProviders } from '@type';\nimport { type ColumnCollection } from '../../utils/column.utils';\n\n/**\n * RTL (Right-to-Left) Plugin for RevoGrid\n * \n * This plugin handles RTL transformation by subscribing to the beforecolumnsset event\n * and applying column order reversal when RTL mode is enabled.\n */\nexport class RTLPlugin extends BasePlugin {\n  private isRTLEnabled = false;\n\n  constructor(\n    revogrid: HTMLRevoGridElement,\n    providers: PluginProviders,\n  ) {\n    super(revogrid, providers);\n    this.init();\n  }\n\n  private init() {\n    // Subscribe to beforecolumnsset event to apply RTL transformation\n    this.addEventListener('beforecolumnsset', (event) => {\n      this.handleBeforeColumnsSet(event);\n    });\n\n    // Listen for RTL property changes\n    this.addEventListener('aftergridinit', () => {\n      this.updateRTLState();\n    });\n\n    // Watch for RTL property changes\n    this.watch('rtl', (value: boolean) => {\n      this.isRTLEnabled = value;\n      this.emit('rtlstatechanged', { rtl: this.isRTLEnabled });\n    }, { immediate: true });\n  }\n\n  /**\n   * Handle the beforecolumnsset event to apply RTL transformation\n   */\n  private handleBeforeColumnsSet(event: CustomEvent<ColumnCollection>) {\n    if (!this.isRTLEnabled) {\n      return; // No transformation needed if RTL is disabled\n    }\n\n    const columnCollection = event.detail;\n    \n    // Apply RTL transformation to all column types\n    const transformedColumns = this.applyRTLTransformationToCollection(columnCollection);\n    \n    // Update the event detail with transformed columns\n    event.detail.columns = transformedColumns.columns;\n    event.detail.columnByProp = transformedColumns.columnByProp;\n    event.detail.columnGrouping = transformedColumns.columnGrouping;\n  }\n\n  /**\n   * Apply RTL transformation to the entire column collection\n   */\n  private applyRTLTransformationToCollection(collection: ColumnCollection): ColumnCollection {\n    const transformedCollection: ColumnCollection = {\n      columns: {\n        rgCol: [],\n        colPinStart: [],\n        colPinEnd: [],\n      },\n      columnByProp: { ...collection.columnByProp },\n      columnGrouping: {\n        rgCol: [],\n        colPinStart: [],\n        colPinEnd: [],\n      },\n      maxLevel: collection.maxLevel,\n      sort: { ...collection.sort },\n    };\n\n    // Transform each column type\n    Object.keys(collection.columns).forEach((type) => {\n      const columnType = type as keyof typeof collection.columns;\n      const columns = collection.columns[columnType];\n      \n      // Apply RTL transformation to columns - create new reversed array\n      const reversedColumns = [...columns].reverse();\n      transformedCollection.columns[columnType] = reversedColumns;\n      \n      // Transform column grouping for this type\n      transformedCollection.columnGrouping[columnType] = this.applyRTLTransformationToGroups(\n        collection.columnGrouping[columnType],\n        columns.length\n      );\n    });\n\n    return transformedCollection;\n  }\n\n  /**\n   * Apply RTL transformation to column groups\n   */\n  private applyRTLTransformationToGroups(groups: any[], totalColumns: number): any[] {\n    return groups.map(group => {\n      // Reverse the indexes for RTL\n      const reversedIndexes = group.indexes.map((index: number) => \n        totalColumns - 1 - index\n      ).reverse();\n      \n      return {\n        ...group,\n        indexes: reversedIndexes\n      };\n    }).reverse(); // Reverse the group order\n  }\n\n  /**\n   * Update RTL state based on the grid's rtl property\n   */\n  private updateRTLState() {\n    const grid = this.revogrid as any;\n    if (grid && typeof grid.rtl === 'boolean') {\n      this.isRTLEnabled = grid.rtl;\n    }\n  }\n\n  /**\n   * Get current RTL state\n   */\n  public getRTLState(): boolean {\n    return this.isRTLEnabled;\n  }\n\n\n  /**\n   * Clean up the plugin\n   */\n  public destroy() {\n    super.destroy();\n  }\n} ", "@use './styles/revo-grid.mixin.scss' as *;\n@use './styles/revo-grid.common.scss' as *;\n@use './styles/revo-grid.default.scss' as *;\n@use './styles/revo-grid.material.scss' as *;\n@use './styles/revo-grid.dark.material.scss' as *;\n@use './styles/revo-grid.dark.compact.scss' as *;\n@use './styles/revo-grid.compact.scss' as *;\n@use './styles/revo-grid.rtl.scss' as *;\n@use '../../global/_icons.scss' as *;\n\nrevo-grid {\n  /* Base theme variables */\n  --revo-grid-primary: #266ae8;\n  --revo-grid-primary-transparent: rgba(38, 106, 232, 0.9);\n  --revo-grid-background: #fff;\n  --revo-grid-foreground: black;\n  --revo-grid-divider: gray;\n  --revo-grid-shadow: rgba(0, 0, 0, 0.15);\n  --revo-grid-text: black;\n  --revo-grid-border: rgba(0, 0, 0, 0.2);\n  \n  /* Filter panel variables */\n  --revo-grid-filter-panel-bg: #fff;\n  --revo-grid-filter-panel-border: #d9d9d9;\n  --revo-grid-filter-panel-shadow: rgba(0, 0, 0, 0.15);\n  --revo-grid-filter-panel-input-bg: #eaeaeb;\n  --revo-grid-filter-panel-divider: #d9d9d9;\n  --revo-grid-filter-panel-select-border: transparent;\n  --revo-grid-filter-panel-select-border-hover: transparent;\n\n  /* Grid specific variables */\n  --revo-grid-header-bg: #f8f9fa;\n  --revo-grid-header-color: #000;\n  --revo-grid-header-border: #cecece;\n  --revo-grid-cell-border: #e2e3e3;\n  --revo-grid-focused-bg: rgba(233, 234, 237, 0.5);\n  --revo-grid-row-hover: #f1f1f1;\n  --revo-grid-row-headers-bg: #f7faff;\n  --revo-grid-row-headers-color: #757a82;\n  --revo-grid-cell-disabled-bg: rgba(0, 0, 0, 0.07);\n  \n  /* Dark theme overrides - applied when theme contains 'dark' */\n  &[theme*='dark'] {\n    --revo-grid-background: #212529;\n    --revo-grid-foreground: #fff;\n    --revo-grid-text: rgba(255, 255, 255, 0.9);\n    --revo-grid-divider: #505050;\n    --revo-grid-border: rgba(255, 255, 255, 0.2);\n\n    /* Filter panel variables */\n    --revo-grid-filter-panel-bg: #212529;\n    --revo-grid-filter-panel-border: #505050;\n    --revo-grid-filter-panel-input-bg: #343a40;\n    --revo-grid-filter-panel-divider: #505050;\n\n    --revo-grid-header-bg: #343a40;\n    --revo-grid-header-color: #fff;\n    --revo-grid-header-border: #505050;\n    --revo-grid-cell-border: #424242;\n    --revo-grid-focused-bg: rgba(52, 58, 64, 0.5);\n    --revo-grid-row-hover: rgba(80, 80, 80, 0.5);\n    --revo-grid-row-headers-bg: rgba(52, 58, 64, 0.8);\n    --revo-grid-row-headers-color: rgba(255, 255, 255, 0.8);\n    --revo-grid-cell-disabled-bg: rgba(255, 255, 255, 0.07);\n  }\n  \n  @include revoGridCommon;\n  \n  /*\n  * Grid required to have a flex property to be able to stretch\n  */\n  display: flex !important;\n  height: 100%;\n  /**\n  * In some cases the min-height is not enough for safari\n  * so setting up the grid  height works\n  */\n  min-height: 300px;\n  font-family: Helvetica, Arial, Sans-Serif, serif;\n  font-size: 14px;\n  position: relative;\n  color: var(--revo-grid-text);\n\n  @include noSelect;\n\n  .attribution {\n    $size: 4px;\n    $color: var(--revo-grid-primary-transparent);\n\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 1000;\n    width: 0;\n    height: 0;\n    border-left: $size solid $color;\n    border-bottom: $size solid $color;\n    border-top: $size solid transparent;\n    border-right: $size solid transparent;\n    cursor: pointer;\n\n    .value {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      background-color: var(--revo-grid-background);\n      padding: 4px;\n      border-radius: 4px;\n      box-shadow: 0 1px 10px var(--revo-grid-border);\n      white-space: nowrap;\n      text-decoration: none;\n      color: var(--revo-grid-text);\n      letter-spacing: 0.3px;\n      font-size: 11px;\n      opacity: 0;\n      width: $size;\n      overflow: hidden;\n      transition: opacity 0.5s ease-in-out, width 0.3s ease-in-out;\n    }\n\n    &:hover {\n      .value {\n        width: 63px;\n        opacity: 1;\n      }\n    }\n  }\n\n  &.column-draggable.column-drag-start {\n    &, * {\n      &:hover {\n        cursor: grabbing;\n      }\n    }\n  }\n\n  .footer-wrapper,\n  .header-wrapper {\n    width: 100%;\n\n    revogr-data {\n      z-index: 3;\n    }\n  }\n\n  revo-dropdown {\n    width: 100%;\n\n    .rv-dr-root {\n      max-height: 100%;\n    }\n    &.shrink label {\n      opacity: 0;\n    }\n  }\n\n  .viewports {\n    // max-height: 100%; // for safari\n    max-width: 100%;\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    flex-grow: 1;\n  }\n\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n\n  .main-viewport {\n    flex-grow: 1;\n    height: 0;\n    display: flex;\n    justify-content: space-between;\n    flex-direction: row;\n  }\n\n  .draggable {\n    $s: 30px;\n    position: fixed;\n    height: $s;\n    line-height: $s;\n    background: var(--revo-grid-background);\n    border-radius: 3px;\n    display: block;\n    z-index: 100;\n    margin-top: 5px;\n    margin-right: -20px;\n    box-shadow: 0 4px 20px 0 var(--revo-grid-shadow);\n    padding-left: 20px;\n    padding-right: 5px;\n\n    &.hidden {\n      display: none;\n    }\n\n    .revo-alt-icon {\n      $alt-icon-color: var(--revo-grid-foreground);\n      background-color: $alt-icon-color;\n      position: absolute;\n      left: 5px;\n      top: 10px;\n    }\n  }\n\n  .draggable-wrapper {\n    &.hidden {\n      display: none;\n    }\n  }\n\n  .drag-position {\n    position: absolute;\n    left: 0;\n    right: 0;\n    height: 1px;\n    z-index: 2;\n    background: var(--revo-grid-divider);\n    pointer-events: none;\n  }\n\n  .drag-position-y {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    width: 1px;\n    z-index: 2;\n    background: var(--revo-grid-divider);\n    pointer-events: none;\n  }\n\n  .drag-auto-scroll-y {\n    pointer-events: none;\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 50px;\n    width: 1px;\n  }\n\n  .clipboard {\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n\n  revogr-scroll-virtual {\n    position: relative;\n    &.vertical,\n    &.horizontal {\n      z-index: 3;\n    }\n  }\n}\n", "import {\n  type VNode,\n  Component,\n  Prop,\n  h,\n  Watch,\n  Element,\n  Listen,\n  Event,\n  EventEmitter,\n  Method,\n  Host,\n} from '@stencil/core';\n\nimport type {\n  MultiDimensionType,\n  DimensionRows,\n  DimensionCols,\n  DimensionType,\n  DimensionTypeCol,\n  RowHeaders,\n  ColumnRegular,\n  ColumnGrouping,\n  DataType,\n  RowDefinition,\n  ColumnType,\n  FocusTemplateFunc,\n  PositionItem,\n  ColumnProp,\n  ViewPortScrollEvent,\n  InitialHeaderClick,\n  AllDimensionType,\n  Editors,\n  BeforeSaveDataDetails,\n  BeforeRangeSaveDataDetails,\n  Cell,\n  ChangedRange,\n  RangeArea,\n  AfterEditEvent,\n  Theme,\n  PluginBaseComponent,\n  HeaderProperties,\n  PluginProviders,\n  FocusAfterRenderEvent,\n  ExtraNodeFuncConfig,\n  RowDragStartDetails,\n  AdditionalData,\n} from '@type';\n\nimport ColumnDataProvider from '../../services/column.data.provider';\nimport { DataProvider } from '../../services/data.provider';\nimport { DSourceState, getVisibleSourceItem, rowTypes } from '@store';\nimport DimensionProvider from '../../services/dimension.provider';\nimport ViewportProvider from '../../services/viewport.provider';\nimport ThemeService from '../../themeManager/theme.service';\nimport { timeout } from '../../utils';\nimport {\n  AutoSizeColumnPlugin,\n  type AutoSizeColumnConfig,\n} from '../../plugins/column.auto-size.plugin';\n\nimport {\n  FilterPlugin,\n} from '../../plugins/filter/filter.plugin';\nimport { SortingPlugin } from '../../plugins/sorting/sorting.plugin';\nimport { ExportFilePlugin } from '../../plugins/export/export.plugin';\nimport { DataInput } from '../../plugins/export/types';\nimport { GroupingRowPlugin } from '../../plugins/groupingRow/grouping.row.plugin';\nimport type { GroupingOptions } from '../../plugins/groupingRow/grouping.row.types';\nimport ViewportService, { FocusedData } from './viewport.service';\nimport { DATA_SLOT, HEADER_SLOT } from './viewport.helpers';\nimport GridScrollingService from './viewport.scrolling.service';\nimport { SelectionStoreConnector } from '../../services/selection.store.connector';\nimport OrderRenderer, { OrdererService } from '../order/order-renderer';\nimport {\n  StretchColumn,\n  isStretchPlugin,\n} from '../../plugins/column.stretch.plugin';\nimport { rowDefinitionByType, rowDefinitionRemoveByType } from './grid.helpers';\nimport { ColumnMovePlugin } from '../../plugins/moveColumn/column.drag.plugin';\nimport { getPropertyFromEvent } from '../../utils/events';\nimport { isMobileDevice } from '../../utils/mobile';\nimport type { Observable } from '../../utils';\nimport type { GridPlugin } from '../../plugins/base.plugin';\nimport { ColumnCollection, getColumnByProp, getColumns } from '../../utils/column.utils';\nimport { WCAGPlugin } from '../../plugins/wcag';\nimport { ColumnFilterConfig, FilterCollectionItem } from '../../plugins/filter/filter.types';\nimport { PluginService } from './plugin.service';\nimport { SortingConfig, SortingOrder } from '../../plugins';\nimport { RTLPlugin } from '../../plugins/rtl/rtl.plugin';\n\n\n/**\n * Revogrid - High-performance, customizable grid library for managing large datasets.\n * ### Events guide\n *\n * For a comprehensive events guide, check the [Events API Page](/guide/api/events).\n * All events propagate to the root level of the grid. [Dependency tree](#Dependencies).\n * \n * ### Type definitions\n *\n * Read [type definition file](https://github.com/revolist/revogrid/blob/master/src/interfaces.d.ts) for the full interface information.\n * \n * All complex property types such as `ColumnRegular`, `ColumnProp`, `ColumnDataSchemaModel` can be found there.\n * \n * ### HTMLRevoGridElement\n *\n * @slot data-{column-type}-{row-type}. @example data-rgCol-rgRow - main data slot. Applies extra elements in <revogr-data />.\n * @slot focus-{column-type}-{row-type}. @example focus-rgCol-rgRow - focus layer for main data. Applies extra elements in <revogr-focus />.\n * @slot viewport - Viewport slot.\n * @slot header - Header slot.\n * @slot footer - Footer slot.\n*/\n@Component({\n  tag: 'revo-grid',\n  styleUrl: 'revo-grid-style.scss',\n})\nexport class RevoGridComponent {\n  // #region Properties\n  /** Excel like functionality.\n   * Show row numbers.\n   * Also can be used for custom row header render if object provided.\n   */\n  @Prop() rowHeaders: RowHeaders | boolean;\n\n  /**\n   * Defines how many rows/columns should be rendered outside visible area.\n   */\n  @Prop() frameSize = 1;\n\n  /**\n   * Indicates default rgRow size.\n   * By default 0, means theme package size will be applied\n   *\n   * Alternatively you can use `rowSize` to reset viewport\n   */\n  @Prop() rowSize = 0;\n\n  /** Indicates default column size. */\n  @Prop() colSize = 100;\n\n  /** When true, user can range selection. */\n  @Prop() range = false;\n\n  /** When true, grid in read only mode. */\n  @Prop() readonly = false;\n\n  /** When true, columns are resizable. */\n  @Prop() resize = false;\n\n  /** When true cell focus appear. */\n  @Prop() canFocus = true;\n\n  /** When true enable clipboard. */\n  @Prop() useClipboard = true;\n\n  /**\n   * Columns - defines an array of grid columns.\n   * Can be column or grouped column.\n   */\n  @Prop() columns: (ColumnRegular | ColumnGrouping)[] = [];\n  /**\n   * Source - defines main data source.\n   * Can be an Object or 2 dimensional array([][]);\n   * Keys/indexes referenced from columns Prop.\n   */\n  @Prop() source: DataType[] = [];\n\n  /** Pinned top Source: {[T in ColumnProp]: any} - defines pinned top rows data source. */\n  @Prop() pinnedTopSource: DataType[] = [];\n\n  /** Pinned bottom Source: {[T in ColumnProp]: any} - defines pinned bottom rows data source. */\n  @Prop() pinnedBottomSource: DataType[] = [];\n\n  /** Custom row properies to be applied. See `RowDefinition` for more info. */\n  @Prop() rowDefinitions: RowDefinition[] = [];\n\n  /** Custom editors register. */\n  @Prop() editors: Editors = {};\n\n  /**\n   * Apply changes in editor when closed except 'Escape' cases.\n   * If custom editor in use method getValue required.\n   * Check interfaces.d.ts `EditorBase` for more info.\n   */\n  @Prop() applyOnClose = false;\n\n  /**\n   * Custom grid plugins. Can be added or removed at runtime.\n   * Every plugin should be inherited from BasePlugin class.\n   * \n   * For more details check [Plugin guide](https://rv-grid.com/guide/plugin/)\n   */\n  @Prop() plugins: GridPlugin[] = [];\n\n  /**\n   * Column Types Format.\n   * Every type represent multiple column properties.\n   * Types will be merged but can be replaced with column properties.\n   * Types were made as separate objects to be reusable per multiple columns.\n   */\n  @Prop() columnTypes: { [name: string]: ColumnType } = {};\n\n  /** Theme name. */\n  @Prop({ reflect: true, mutable: true }) theme: Theme = 'default';\n\n  /**\n   * Row class property mapping.\n   * Map custom classes to rows from row object data.\n   * Define this property in rgRow object and this will be mapped as rgRow class.\n   */\n  @Prop({ reflect: true }) rowClass = '';\n\n  /**\n   * Autosize config.\n   * Enables columns autoSize.\n   * For more details check `autoSizeColumn` plugin.\n   * By default disabled, hence operation is not performance efficient.\n   * `true` to enable with default params (double header separator click for autosize).\n   * Or define config. See `AutoSizeColumnConfig` for more details.\n   */\n  @Prop() autoSizeColumn: boolean | AutoSizeColumnConfig = false;\n\n  /**\n   * Enables filter plugin.\n   * Can be boolean.\n   * Or can be filter collection See `FilterCollection` for more info.\n   */\n  @Prop() filter: boolean | ColumnFilterConfig = false;\n\n  /**\n   * Alternative way to set sorting.\n   * `{columns: [{prop: 'name', order: 'asc'}]}`\n   * Use SortingPlugin to get current sorting state\n   */\n  @Prop() sorting?: SortingConfig;\n\n  /**\n   * Apply changes typed in editor on editor close except Escape cases.\n   * If custom editor in use method `getValue` required.\n   * Check `interfaces.d.ts` `EditorBase` for more info.\n   */\n  @Prop() focusTemplate: FocusTemplateFunc;\n\n  /**\n   * Enable column move plugin.\n   */\n  @Prop() canMoveColumns = false;\n  /**\n   * Trimmed rows.\n   * Functionality which allows to hide rows from main data set.\n   * `trimmedRows` are physical `rgRow` indexes to hide.\n   */\n  @Prop() trimmedRows: Record<number, boolean> = {};\n\n  /**\n   * Enable export plugin.\n   */\n  @Prop() exporting = false;\n\n  /**\n   * Group rows based on this property.\n   * Define properties to be groped by grouping plugin See `GroupingOptions`.\n   */\n  @Prop() grouping: GroupingOptions;\n\n  /**\n   * Stretch strategy for columns by `StretchColumn` plugin.\n   * For example if there are more space on the right last column size would be increased.\n   */\n  @Prop() stretch: boolean | string = false;\n\n  /**\n   * Additional data to be passed to plugins, renders or editors.\n   * For example if you need to pass Vue component instance.\n   */\n  @Prop() additionalData: AdditionalData = {};\n\n  /**\n   * Disable lazy rendering mode for the `X axis`.\n   * Use when not many columns present and you don't need rerenader cells during scroll.\n   * Can be used for initial rendering performance improvement.\n   */\n  @Prop() disableVirtualX = false;\n  /**\n   * Disable lazy rendering mode for the `Y axis`.\n   * Use when not many rows present and you don't need rerenader cells during scroll.\n   * Can be used for initial rendering performance improvement.\n   */\n  @Prop() disableVirtualY = false;\n\n  /**\n   * Please only hide the attribution if you are subscribed to Pro version\n   */\n  @Prop() hideAttribution = false;\n\n  /**\n   * Prevent rendering until job is done.\n   * Can be used for initial rendering performance improvement.\n   * When several plugins require initial rendering this will prevent double initial rendering.\n   */\n  @Prop() jobsBeforeRender: Promise<any>[] = [];\n\n  /**\n   * Register new virtual node inside of grid.\n   * Used for additional items creation such as plugin elements.\n   * Should be set before grid render inside of plugins.\n   * Can return VNode result of h() function or a function that returns VNode.\n   * Function can be used for performance improvement and additional renders.\n   */\n  @Prop() registerVNode: (\n    | VNode\n    | ((c: ExtraNodeFuncConfig) => VNode)\n  )[] = [];\n\n\n  /**\n   * Enable accessibility. If disabled, the grid will not be accessible.\n   * @default true\n   */\n  @Prop() accessible = true;\n\n  /**\n   * Enable right-to-left (RTL) mode. When enabled, columns will be displayed from right to left.\n   * @default false\n   */\n  @Prop() rtl = false;\n\n  /**\n   * Disable native drag&drop plugin.\n   */\n  @Prop() canDrag = true;\n\n  // #endregion\n\n  // #region Events\n  /**\n   * New content size has been applied. The size excludes the header.\n   * Currently, the event responsible for applying the new content size does not provide the actual size.\n   * To retrieve the actual content size, you can utilize the `getContentSize` function after the event has been triggered.\n   */\n  @Event() contentsizechanged: EventEmitter<MultiDimensionType>;\n\n  /**\n   * Before the data is edited.\n   * To prevent the default behavior of editing data and use your own implementation, call `e.preventDefault()`.\n   * To override the edit result with your own value, set the `e.val` property to your desired value.\n   */\n  @Event() beforeedit: EventEmitter<BeforeSaveDataDetails>;\n\n  /**\n   * Before applying range data, specifically when a range selection occurs.\n   * To customize the data and prevent the default edit data from being set, you can call `e.preventDefault()`.\n   */\n  @Event() beforerangeedit: EventEmitter<BeforeRangeSaveDataDetails>;\n\n  /**\n   * After data applied or range changed.\n   */\n  @Event() afteredit: EventEmitter<AfterEditEvent>;\n\n  /**\n   * Before autofill is applied.\n   * To prevent the default behavior of applying the edit data, you can call `e.preventDefault()`.\n   */\n  @Event() beforeautofill: EventEmitter<ChangedRange>;\n\n  /**\n   * Before autofill is applied. Runs before beforeautofill event.\n   * Use e.preventDefault() to prevent range.\n   */\n  @Event() beforerange: EventEmitter<ChangedRange>;\n\n  /**\n   * After focus render finished.\n   * Can be used to access a focus element through `event.target`.\n   * This is just a duplicate of `afterfocus` from `revogr-focus.tsx`.\n   */\n  @Event() afterfocus: EventEmitter<FocusAfterRenderEvent>;\n\n  /**\n   * Before the order of `rgRow` is applied.\n   * To prevent the default behavior of changing the order of `rgRow`, you can call `e.preventDefault()`.\n   */\n  @Event() roworderchanged: EventEmitter<{ from: number; to: number }>;\n\n  /**\n   * By `SortingPlugin`\n   * <br>Triggered immediately after header click.\n   * <br>First in sorting event sequence. Ff this event stops no other event called.\n   * <br>Use `e.preventDefault()` to prevent sorting.\n   */\n  @Event() beforesorting: EventEmitter<{\n    column: ColumnRegular;\n    order: 'desc' | 'asc';\n    additive: boolean;\n  }>;\n\n  /**\n   * By `SortingPlugin`\n   * <br>Same as `beforesorting` but triggered after `beforeanysource` (when source is changed).\n   * <br>Use `e.preventDefault()` to prevent sorting data change.\n   */\n  @Event() beforesourcesortingapply: EventEmitter<{\n    type: DimensionRows;\n    sorting?: SortingOrder;\n  }>;\n\n  /**\n   * By `SortingPlugin`\n   * <br> After `beforesorting`\n   * <br>Triggered after column data updated with new sorting order.\n   * <br>Use `e.preventDefault()` to prevent sorting data change.\n   */\n  @Event() beforesortingapply: EventEmitter<{\n    column: ColumnRegular;\n    order: 'desc' | 'asc';\n    additive: boolean;\n  }>;\n\n  /**\n   * This event is triggered when the row order change is started.\n   * To prevent the default behavior of changing the row order, you can call `e.preventDefault()`.\n   * To change the item name at the start of the row order change, you can set `e.text` to the desired new name.\n   */\n  @Event() rowdragstart: EventEmitter<RowDragStartDetails>;\n\n  /**\n   * On header click.\n   */\n  @Event() headerclick: EventEmitter<ColumnRegular>;\n\n  /**\n   * Before the cell focus is changed.\n   * To prevent the default behavior of changing the cell focus, you can call `e.preventDefault()`.\n   */\n  @Event() beforecellfocus: EventEmitter<BeforeSaveDataDetails>;\n\n  /**\n   * Before the grid focus is lost.\n   * To prevent the default behavior of changing the cell focus, you can call `e.preventDefault()`.\n   */\n  @Event() beforefocuslost: EventEmitter<FocusedData | null>;\n\n  /**\n   * Before main source/rows data apply.\n   * You can override data source here\n   */\n  @Event() beforesourceset: EventEmitter<{\n    type: DimensionRows;\n    source: DataType[];\n  }>;\n\n  /**\n   * Before data apply on any source type. Can be source from pinned and main viewport.\n   * You can override data source here\n   */\n  @Event() beforeanysource: EventEmitter<{\n    type: DimensionRows;\n    source: DataType[];\n  }>;\n\n  /**\n   * After main source/rows updated\n   */\n  @Event() aftersourceset: EventEmitter<{\n    type: DimensionRows;\n    source: DataType[];\n  }>;\n\n  /**\n   * Emitted after each source update, whether from the pinned or main viewport.\n   * Useful for tracking all changes originating from sources in both the pinned and main viewports.\n   */\n  @Event() afteranysource: EventEmitter<{\n    type: DimensionRows;\n    source: DataType[];\n  }>;\n\n  /**\n   * Emitted before a column update is applied.\n   * Listeners can use this event to perform any necessary actions or modifications before the column update is finalized.\n   */\n  @Event() beforecolumnsset: EventEmitter<ColumnCollection>;\n\n  /**\n   * Emitted before a column update is applied, after the column set is gathered and the viewport is updated.\n   * Useful for performing actions or modifications before the final application of the column update.\n   */\n  @Event() beforecolumnapplied: EventEmitter<ColumnCollection>;\n\n  /**  Column updated */\n  @Event() aftercolumnsset: EventEmitter<{\n    columns: ColumnCollection;\n    order: SortingOrder;\n  }>;\n\n  /**\n   * Emitted before applying a filter to the data source.\n   * Use e.preventDefault() to prevent cell focus change.\n   * Modify if you need to change filters.\n   */\n  @Event() beforefilterapply: EventEmitter<{ collection: Record<ColumnProp, FilterCollectionItem> }>;\n\n  /**\n   * Emitted before applying a filter to the data source.\n   * Use e.preventDefault() to prevent the default behavior of trimming values and applying the filter.\n   * Modify the `collection` property if you want to change the filters.\n   * Modify the `itemsToFilter` property if you want to filter the indexes for trimming.\n   */\n  @Event() beforefiltertrimmed: EventEmitter<{\n    collection: Record<ColumnProp, FilterCollectionItem>;\n    itemsToFilter: Record<number, boolean>;\n  }>;\n\n  /**\n   * Emitted before trimming values.\n   * Use e.preventDefault() to prevent the default behavior of trimming values.\n   * Modify the `trimmed` property if you want to filter the indexes for trimming.\n   */\n  @Event() beforetrimmed: EventEmitter<{\n    trimmed: Record<number, boolean>;\n    trimmedType: string;\n    type: string;\n  }>;\n\n  /**\n   * Emitted after trimmed values have been applied.\n   * Useful for notifying when trimming of values has taken place.\n   */\n  @Event() aftertrimmed: EventEmitter;\n\n  /**\n   * Emitted when the viewport is scrolled.\n   * Useful for tracking viewport scrolling events.\n   */\n  @Event() viewportscroll: EventEmitter<ViewPortScrollEvent>;\n\n  /**\n   * Before export\n   * Use e.preventDefault() to prevent export\n   * Replace data in Event in case you want to modify it in export\n   */\n  @Event() beforeexport: EventEmitter<DataInput>;\n\n  /**\n   * Emitted before editing starts.\n   * Use e.preventDefault() to prevent the default edit behavior.\n   */\n  @Event() beforeeditstart: EventEmitter<BeforeSaveDataDetails>;\n\n  /**\n   * Emitted after column resizing.\n   * Useful for retrieving the resized columns.\n   */\n  @Event() aftercolumnresize: EventEmitter<{\n    [index: number]: ColumnRegular;\n  }>;\n\n  /**\n   * Emitted before the row definition is applied.\n   * Useful for modifying or preventing the default row definition behavior.\n   */\n  @Event() beforerowdefinition: EventEmitter<{ vals: any; oldVals: any }>;\n\n  /**\n   * Emitted when the filter configuration is changed\n   */\n  @Event() filterconfigchanged: EventEmitter;\n\n  /**\n   * Emitted when the sorting configuration is changed\n   * SortingPlugin subsribed to this event\n   */\n  @Event() sortingconfigchanged: EventEmitter<SortingConfig>;\n\n  /**\n   * Emmited when the row headers are changed.\n   */\n  @Event() rowheaderschanged: EventEmitter;\n\n  /**\n   * Emmited before the grid is rendered.\n   */\n  @Event() beforegridrender: EventEmitter;\n\n\n  /**\n   * Emmited after the grid is rendered.\n   */\n  @Event() aftergridrender: EventEmitter;\n\n  /**\n   * Emmited after the grid is initialized. Connected to the DOM.\n   */\n  @Event() aftergridinit: EventEmitter;\n\n  /**\n   * Emmited after the additional data is changed\n   */\n  @Event() additionaldatachanged: EventEmitter<any>;\n\n  /**\n   * Emmited after the theme is changed\n   */\n  @Event() afterthemechanged: EventEmitter<Theme>;\n\n\n  /**\n   * Emmited after grid created\n   */\n  @Event() created: EventEmitter;\n\n  // #endregion\n\n  // #region Methods\n  /**\n   * Refreshes data viewport.\n   * Can be specific part as rgRow or pinned rgRow or 'all' by default.\n   */\n  @Method() async refresh(type: DimensionRows | 'all' = 'all') {\n    if (!this.dataProvider) {\n      throw new Error('Not connected');\n    }\n    this.dataProvider.refresh(type);\n  }\n\n  /**\n   * Refreshes data at specified cell.\n   * Useful for performance optimization.\n   * No viewport update will be triggered.\n   * \n   * @example\n   * const grid = document.querySelector('revo-grid');\n   * grid.setDataAt({ row: 0, col: 0, val: 'test' }); // refresh\n   */\n  @Method() async setDataAt(\n    { row, col, colType = 'rgCol', rowType = 'rgRow', val, skipDataUpdate = false }: {\n      row: number; // virtual\n      col: number; // virtual\n      val?: any;\n      skipDataUpdate?: boolean;\n    } & AllDimensionType,\n  ) {\n    if (this.dataProvider && this.columnProvider && !skipDataUpdate) {\n      const columnProp = this.columnProvider.getColumn(col, colType)?.prop;\n      if (typeof columnProp !== 'undefined') {\n        this.dataProvider.setCellData({\n          type: rowType,\n          rowIndex: row,\n          prop: columnProp,\n          val,\n        }, false);\n      }\n    }\n    const dataElement: HTMLRevogrDataElement | null =\n      this.element.querySelector(\n        `revogr-data[type=\"${rowType}\"][col-type=\"${colType}\"]`,\n      );\n    return dataElement?.updateCell({\n      row,\n      col,\n    });\n  }\n\n  /**\n   * Scrolls viewport to specified row by index.\n   */\n  @Method() async scrollToRow(coordinate = 0) {\n    if (!this.dimensionProvider) {\n      throw new Error('Not connected');\n    }\n    const y = this.dimensionProvider.getViewPortPos({\n      coordinate,\n      dimension: 'rgRow',\n    });\n    await this.scrollToCoordinate({ y });\n  }\n\n  /**\n   * Scrolls viewport to specified column by index.\n   */\n  @Method() async scrollToColumnIndex(coordinate = 0) {\n    if (!this.dimensionProvider) {\n      throw new Error('Not connected');\n    }\n    const x = this.dimensionProvider.getViewPortPos({\n      coordinate,\n      dimension: 'rgCol',\n    });\n    await this.scrollToCoordinate({ x });\n  }\n\n  /**\n   * Scrolls viewport to specified column by prop\n   */\n  @Method() async scrollToColumnProp(\n    prop: ColumnProp,\n    dimension: DimensionTypeCol = 'rgCol',\n  ) {\n    if (!this.dimensionProvider || !this.columnProvider) {\n      throw new Error('Not connected');\n    }\n\n    const coordinate = this.columnProvider.getColumnIndexByProp(\n      prop,\n      dimension,\n    );\n    if (coordinate < 0) {\n      // already on the screen\n      return;\n    }\n    const x = this.dimensionProvider.getViewPortPos({\n      coordinate,\n      dimension,\n    });\n    await this.scrollToCoordinate({ x });\n  }\n\n  /** Update columns */\n  @Method() async updateColumns(cols: ColumnRegular[]) {\n    this.columnProvider?.updateColumns(cols);\n  }\n\n  /** Add trimmed by type */\n  @Method() async addTrimmed(\n    trimmed: Record<number, boolean>,\n    trimmedType = 'external',\n    type: DimensionRows = 'rgRow',\n  ) {\n    if (!this.dataProvider) {\n      throw new Error('Not connected');\n    }\n    const event = this.beforetrimmed.emit({\n      trimmed,\n      trimmedType,\n      type,\n    });\n    if (event.defaultPrevented) {\n      return event;\n    }\n    this.dataProvider.setTrimmed({ [trimmedType]: event.detail.trimmed }, type);\n    this.aftertrimmed.emit();\n    return event;\n  }\n\n  /**  Scrolls view port to coordinate */\n  @Method() async scrollToCoordinate(cell: Partial<Cell>) {\n    this.viewport?.scrollToCell(cell);\n  }\n\n  /**  Open editor for cell. */\n  @Method() async setCellEdit(\n    rgRow: number,\n    prop: ColumnProp,\n    rowSource: DimensionRows = 'rgRow',\n  ) {\n    const rgCol = getColumnByProp(this.columns, prop);\n    if (!rgCol) {\n      return;\n    }\n    await timeout();\n    const colGroup = rgCol.pin || 'rgCol';\n    if (!this.columnProvider) {\n      throw new Error('Not connected');\n    }\n    this.viewport?.setEdit(\n      rgRow,\n      this.columnProvider.getColumnIndexByProp(prop, colGroup),\n      colGroup,\n      rowSource,\n    );\n  }\n\n  /**  Set focus range. */\n  @Method() async setCellsFocus(\n    cellStart: Cell = { x: 0, y: 0 },\n    cellEnd: Cell = { x: 0, y: 0 },\n    colType = 'rgCol',\n    rowType = 'rgRow',\n  ) {\n    this.viewport?.setFocus(colType, rowType, cellStart, cellEnd);\n  }\n\n  /**  Get data from source */\n  @Method() async getSource(type: DimensionRows = 'rgRow') {\n    if (!this.dataProvider) {\n      throw new Error('Not connected');\n    }\n    return this.dataProvider.stores[type].store.get('source');\n  }\n\n  /**\n   * Get data from visible part of source\n   * Trimmed/filtered rows will be excluded\n   * @param type - type of source\n   */\n  @Method() async getVisibleSource(type: DimensionRows = 'rgRow') {\n    if (!this.dataProvider) {\n      throw new Error('Not connected');\n    }\n    return getVisibleSourceItem(this.dataProvider.stores[type].store);\n  }\n\n  /**\n   * Provides access to rows internal store observer\n   * Can be used for plugin support\n   * @param type - type of source\n   */\n  @Method() async getSourceStore(\n    type: DimensionRows = 'rgRow',\n  ): Promise<Observable<DSourceState<DataType, DimensionRows>>> {\n    if (!this.dataProvider) {\n      throw new Error('Not connected');\n    }\n    return this.dataProvider.stores[type].store;\n  }\n  /**\n   * Provides access to column internal store observer\n   * Can be used for plugin support\n   * @param type - type of column\n   */\n  @Method() async getColumnStore(\n    type: DimensionCols = 'rgCol',\n  ): Promise<Observable<DSourceState<ColumnRegular, DimensionCols>>> {\n    if (!this.columnProvider) {\n      throw new Error('Not connected');\n    }\n    return this.columnProvider.stores[type].store;\n  }\n\n  /**\n   * Update column sorting\n   * @param column - column prop and cellCompare\n   * @param order - order to apply\n   * @param additive - if false will replace current order\n   * \n   * later passed to SortingPlugin\n   */\n  @Method() async updateColumnSorting(\n    column: Pick<ColumnRegular, 'prop' | 'cellCompare'>,\n    order: 'asc' | 'desc' | undefined,\n    additive: boolean,\n  ) {\n    this.sortingconfigchanged.emit({\n      columns: [{\n        prop: column.prop,\n        order,\n        cellCompare: column.cellCompare,\n      }],\n      additive,\n    });\n  }\n\n  /**\n   * Clears column sorting\n   */\n  @Method() async clearSorting() {\n    this.sortingconfigchanged.emit({\n      columns: [],\n    });\n  }\n\n  /**\n   * Receive all columns in data source\n   */\n  @Method() async getColumns(): Promise<ColumnRegular[]> {\n    if (!this.columnProvider) {\n      throw new Error('Not connected');\n    }\n    return this.columnProvider.getColumns();\n  }\n\n  /**\n   * Clear current grid focus. Grid has no longer focus on it.\n   */\n  @Method() async clearFocus() {\n    const focused = this.viewport?.getFocused();\n    const event = this.beforefocuslost.emit(focused);\n    if (event.defaultPrevented) {\n      return;\n    }\n    this.selectionStoreConnector?.clearAll();\n  }\n\n  /**\n   * Get all active plugins instances\n   */\n  @Method() async getPlugins(): Promise<PluginBaseComponent[]> {\n    return this.pluginService.get();\n  }\n\n  /**\n   * Get the currently focused cell.\n   */\n  @Method() async getFocused(): Promise<FocusedData | null> {\n    return this.viewport?.getFocused() ?? null;\n  }\n\n  /**\n   * Get size of content\n   * Including all pinned data\n   */\n  @Method() async getContentSize(): Promise<Cell> {\n    if (!this.dimensionProvider) {\n      throw new Error('Not connected');\n    }\n    return this.dimensionProvider?.getFullSize();\n  }\n  /**\n   * Get the currently selected Range.\n   */\n  @Method() async getSelectedRange(): Promise<RangeArea & AllDimensionType | null> {\n    return this.viewport?.getSelectedRange() ?? null;\n  }\n\n  /**\n   * Refresh extra elements. Triggers re-rendering of extra elements and functions.\n   * Part of extraElements and registerVNode methods.\n   * Useful for plugins.\n   */\n  @Method() async refreshExtraElements() {\n    this.extraService?.refresh();\n  }\n\n  /**\n   * Get all providers for grid\n   * Useful for external grid integration\n   */\n  @Method() async getProviders() {\n    return this.getPluginData();\n  }\n\n  // #endregion\n\n  // #region Listeners outside scope\n  private clickTrackForFocusClear?: number;\n  @Listen('touchstart', { target: 'document' })\n  @Listen('mousedown', { target: 'document' })\n  mousedownHandle(event: MouseEvent | TouchEvent) {\n    const screenX = getPropertyFromEvent(event, 'screenX');\n    const screenY = getPropertyFromEvent(event, 'screenY');\n    if (screenX === null || screenY === null) {\n      return;\n    }\n\n    this.clickTrackForFocusClear = screenX + screenY;\n  }\n  /**\n   * To keep your elements from losing focus use mouseup/touchend e.preventDefault();\n   */\n  @Listen('touchend', { target: 'document' })\n  @Listen('mouseup', { target: 'document' })\n  async mouseupHandle(event: MouseEvent | TouchEvent) {\n    const screenX = getPropertyFromEvent(event, 'screenX');\n    const screenY = getPropertyFromEvent(event, 'screenY');\n    if (screenX === null || screenY === null) {\n      return;\n    }\n\n    if (event.defaultPrevented) {\n      return;\n    }\n    const pos = screenX + screenY;\n    // detect if mousemove then do nothing\n    if (Math.abs((this.clickTrackForFocusClear ?? 0) - pos) > 10) {\n      return;\n    }\n\n    // Check if action finished inside the document\n    // if event prevented, or it is current table don't clear focus\n    const path = event.composedPath();\n    if (!path.includes(this.element) &&\n        !(this.element.shadowRoot && path.includes(this.element.shadowRoot))\n      ) {\n      // Perform actions if the click is outside the component\n      await this.clearFocus();\n    }\n  }\n  // #endregion\n\n  // #region Listeners\n  /** Drag events */\n  @Listen('rowdragstartinit') onRowDragStarted(\n    e: CustomEvent<HTMLRevogrOrderEditorElementEventMap['rowdragstartinit']>,\n  ) {\n    const dragStart = this.rowdragstart.emit(e.detail);\n    if (dragStart.defaultPrevented) {\n      e.preventDefault();\n      return;\n    }\n    this.orderService?.start(this.element, {\n      ...e.detail,\n      ...dragStart.detail,\n    });\n  }\n\n  @Listen('rowdragendinit') onRowDragEnd() {\n    this.orderService?.end();\n  }\n\n  @Listen('roworderchange') onRowOrderChange(e: CustomEvent<HTMLRevogrOrderEditorElementEventMap['roworderchange']>) {\n    this.dataProvider?.changeOrder(e.detail);\n  }\n\n  @Listen('rowdragmoveinit') onRowDrag({ detail }: CustomEvent<PositionItem>) {\n    this.orderService?.move(detail);\n  }\n\n  @Listen('rowdragmousemove') onRowMouseMove(e: CustomEvent<Cell>) {\n    this.orderService?.moveTip(e.detail);\n  }\n\n  @Listen('celleditapply') async onCellEdit(\n    e: CustomEvent<BeforeSaveDataDetails>,\n  ) {\n    const { defaultPrevented, detail } = this.beforeedit.emit(e.detail);\n    await timeout();\n    // apply data\n    if (!defaultPrevented) {\n      this.dataProvider?.setCellData(detail);\n\n      // @feature: incrimental update for cells\n      // this.dataProvider.setCellData(detail, false);\n      // await this.setDataAt({\n      //   row: detail.rowIndex,\n      //   col: detail.colIndex,\n      //   rowType: detail.type,\n      //   colType: detail.colType,\n      // });\n      this.afteredit.emit(detail);\n    }\n  }\n\n  @Listen('rangeeditapply') onRangeEdit(\n    e: CustomEvent<HTMLRevogrOverlaySelectionElementEventMap['rangeeditapply']>,\n  ) {\n    if (!this.dataProvider) {\n      throw new Error('Not connected');\n    }\n    const { defaultPrevented, detail } = this.beforerangeedit.emit(e.detail);\n    if (defaultPrevented) {\n      e.preventDefault();\n      return;\n    }\n    this.dataProvider.setRangeData(detail.data, detail.type);\n    this.afteredit.emit(detail);\n  }\n\n  @Listen('selectionchangeinit') onRangeChanged(\n    e: CustomEvent<HTMLRevogrOverlaySelectionElementEventMap['selectionchangeinit']>) {\n    const beforeange = this.beforerange.emit(e.detail);\n    if (beforeange.defaultPrevented) {\n      e.preventDefault();\n    }\n    const beforeFill = this.beforeautofill.emit(beforeange.detail);\n    if (beforeFill.defaultPrevented) {\n      e.preventDefault();\n    }\n  }\n\n  @Listen('rowdropinit') onRowDropped(\n    e: CustomEvent<{ from: number; to: number }>,\n  ) {\n    // e.cancelBubble = true;\n    const { defaultPrevented } = this.roworderchanged.emit(e.detail);\n    if (defaultPrevented) {\n      e.preventDefault();\n    }\n  }\n\n  @Listen('beforeheaderclick') onHeaderClick(\n    e: CustomEvent<InitialHeaderClick>,\n  ) {\n    const { defaultPrevented } = this.headerclick.emit({\n      ...e.detail.column,\n      originalEvent: e.detail.originalEvent,\n    });\n    if (defaultPrevented) {\n      e.preventDefault();\n    }\n  }\n\n  @Listen('beforecellfocusinit') onCellFocus(\n    e: CustomEvent<BeforeSaveDataDetails>,\n  ) {\n    const { defaultPrevented } = this.beforecellfocus.emit(e.detail);\n    if (!this.canFocus || defaultPrevented) {\n      e.preventDefault();\n    }\n  }\n\n  // #endregion\n\n  // #region Private Properties\n  @Element() element: HTMLRevoGridElement;\n  extraElements: HTMLRevogrExtraElement['nodes'] = [];\n  /** \n   * Service for rendering extra elements as virtual nodes\n   * Part of extraElements and registerVNode methods\n   */\n  extraService?: HTMLRevogrExtraElement;\n\n  columnProvider?: ColumnDataProvider;\n  dataProvider?: DataProvider;\n  dimensionProvider?: DimensionProvider;\n  viewportProvider?: ViewportProvider;\n  themeService: ThemeService;\n  pluginService = new PluginService();\n  viewport: ViewportService | null = null;\n  isInited = false;\n\n  orderService: OrdererService;\n  selectionStoreConnector?: SelectionStoreConnector;\n  scrollingService: GridScrollingService;\n\n  // #endregion\n\n  // #region Watchers\n  @Watch('columnTypes') columnTypesChanged() {\n    // Column format change will trigger column structure update\n    this.columnChanged(this.columns);\n  }\n\n  @Watch('columns') columnChanged(\n    newVal: (ColumnGrouping | ColumnRegular)[] = [],\n    _prevVal: (ColumnGrouping | ColumnRegular)[] | undefined = undefined,\n    __watchName: string = 'columns',\n    init = false,\n  ) {\n    if (!this.dimensionProvider || !this.columnProvider) {\n      return;\n    }\n    const columnGather = getColumns(\n      newVal,\n      0,\n      this.columnTypes,\n    );\n    const beforeSetEvent = this.beforecolumnsset.emit(columnGather);\n    if (beforeSetEvent.defaultPrevented) {\n      return;\n    }\n    this.dimensionProvider.applyNewColumns(\n      beforeSetEvent.detail.columns,\n      this.disableVirtualX,\n      init,\n    );\n    const beforeApplyEvent = this.beforecolumnapplied.emit(columnGather);\n    if (beforeApplyEvent.defaultPrevented) {\n      return;\n    }\n    const columns = this.columnProvider.setColumns(beforeApplyEvent.detail);\n    this.aftercolumnsset.emit({\n      columns,\n      order: Object.entries(beforeApplyEvent.detail.sort).reduce((acc: SortingOrder, [prop, column]) => {\n        acc[prop] = column.order;\n        return acc;\n      }, {}),\n    });\n  }\n\n  @Watch('disableVirtualX') disableVirtualXChanged(\n    newVal = false,\n    prevVal = false,\n  ) {\n    if (newVal === prevVal) {\n      return;\n    }\n    this.columnChanged(this.columns);\n  }\n\n  @Watch('rowSize') rowSizeChanged(s: number) {\n    if (!this.dimensionProvider) {\n      return;\n    }\n    // clear existing data\n    this.dimensionProvider.setSettings({ originItemSize: s }, 'rgRow');\n    this.rowDefChanged(this.rowDefinitions, this.rowDefinitions, 'rowSize', true);\n  }\n\n  @Watch('theme') themeChanged(\n    t: Theme,\n    _?: Theme,\n    __ = 'theme',\n    init = false,\n  ) {\n    if (!this.dimensionProvider) {\n      return;\n    }\n    this.themeService.register(t);\n    this.dimensionProvider.setSettings(\n      { originItemSize: this.themeService.rowSize },\n      'rgRow',\n    );\n    this.dimensionProvider.setSettings(\n      { originItemSize: this.colSize },\n      'rgCol',\n    );\n    // if theme change we need to reapply row size and reset viewport\n    if (!init) {\n      // clear existing data\n      this.dimensionProvider.setSettings(\n        { originItemSize: this.themeService.rowSize },\n        'rgRow',\n      );\n      this.rowDefChanged(\n        // for cases when some custom size present and not\n        this.rowDefinitions,\n        this.rowDefinitions,\n        'theme',\n        true,\n      );\n    }\n    this.afterthemechanged.emit(t);\n  }\n\n  @Watch('source')\n  @Watch('pinnedBottomSource')\n  @Watch('pinnedTopSource')\n  dataSourceChanged<T extends DataType>(\n    newVal: T[] = [],\n    _: T[] | undefined,\n    watchName: string,\n  ) {\n    if (!this.dataProvider) {\n      return;\n    }\n    let type: DimensionRows = 'rgRow';\n    switch (watchName) {\n      case 'pinnedBottomSource':\n        type = 'rowPinEnd';\n        break;\n      case 'pinnedTopSource':\n        type = 'rowPinStart';\n        break;\n      case 'source':\n        type = 'rgRow';\n        /**\n         * Applied for source only for cross compatability between plugins\n         */\n        const beforesourceset = this.beforesourceset.emit({\n          type,\n          source: newVal,\n        });\n        newVal = beforesourceset.detail.source as T[];\n        break;\n    }\n    const beforesourceset = this.beforeanysource.emit({\n      type,\n      source: newVal,\n    });\n    const newSource = [...beforesourceset.detail.source];\n    this.dataProvider.setData(newSource, type, this.disableVirtualY);\n\n    /** \n     * Applied for source only for cross compatability between plugins\n     */\n    if (watchName === 'source') {\n      this.aftersourceset.emit({\n        type,\n        source: newVal,\n      });\n    }\n    this.afteranysource.emit({\n      type,\n      source: newVal,\n    });\n  }\n\n  @Watch('disableVirtualY') disableVirtualYChanged(\n    newVal = false,\n    prevVal = false,\n  ) {\n    if (newVal === prevVal) {\n      return;\n    }\n    this.dataSourceChanged(this.source, this.source, 'source');\n  }\n\n  @Watch('rowDefinitions') rowDefChanged(\n    after: RowDefinition[],\n    before?: RowDefinition[],\n    _watchName?: string,\n    forceUpdate = true,\n  ) {\n    // in firefox it's triggered before init\n    if (!this.dimensionProvider || !this.dataProvider) {\n      return;\n    }\n    const {\n      detail: { vals: newVal, oldVals: oldVal },\n    } = this.beforerowdefinition.emit({\n      vals: after,\n      oldVals: before,\n    });\n    // apply new values\n    const newRows = rowDefinitionByType(newVal);\n    // clear current defs\n    if (oldVal) {\n      const remove = rowDefinitionRemoveByType(oldVal);\n      // clear all old data and drop sizes\n      for (const t in remove) {\n        if (remove.hasOwnProperty(t)) {\n          const type = t as DimensionRows;\n          const store = this.dataProvider.stores[type];\n          const sourceLength = store.store.get('source').length;\n          this.dimensionProvider.clearSize(type, sourceLength);\n        }\n      }\n    }\n    // set new sizes\n    rowTypes.forEach((t) => {\n      const newSizes = newRows[t];\n      // apply new sizes or force update\n      if (newSizes || forceUpdate) {\n        this.dimensionProvider?.setCustomSizes(t, newSizes?.sizes || {});\n      }\n    });\n  }\n\n  @Watch('trimmedRows') trimmedRowsChanged(\n    newVal: Record<number, boolean> = {},\n  ) {\n    this.addTrimmed(newVal);\n  }\n  /**\n   * Grouping\n   */\n  @Watch('grouping') groupingChanged(newVal: GroupingOptions = {}) {\n    this.pluginService.getByClass(GroupingRowPlugin)?.setGrouping(newVal || {});\n  }\n  /**\n   * Stretch Plugin Apply\n   */\n  @Watch('stretch') applyStretch(isStretch: boolean | string) {\n    if (!this.dimensionProvider || !this.dataProvider || !this.columnProvider || !this.viewportProvider) {\n      return;\n    }\n    if (isStretch === 'false') {\n      isStretch = false;\n    }\n\n    const pluginData = this.getPluginData();\n    if (!pluginData) {\n      return;\n    }\n    const stretch = this.pluginService.getByClass(StretchColumn);\n    if ((typeof isStretch === 'boolean' && isStretch) || isStretch === 'true') {\n      if (!stretch) {\n        this.pluginService.add(new StretchColumn(this.element, pluginData));\n      } else if (isStretchPlugin(stretch)) {\n        stretch.applyStretch(this.columnProvider.getRawColumns());\n      }\n    } else if (stretch) {\n      this.pluginService.remove(stretch);\n    }\n  }\n\n  @Watch('filter') applyFilter(cfg: boolean | ColumnFilterConfig) {\n    this.filterconfigchanged.emit(cfg);\n  }\n\n  @Watch('sorting') applySorting(cfg?: SortingConfig) {\n    this.sortingconfigchanged.emit(cfg);\n  }\n\n  @Watch('rowHeaders') rowHeadersChange(rowHeaders?: RowHeaders | boolean) {\n    this.rowheaderschanged.emit(rowHeaders);\n  }\n\n  /**\n   * Register external VNodes\n   */\n  @Watch('registerVNode') registerOutsideVNodes(elements: HTMLRevogrExtraElement['nodes'] = []) {\n    this.extraElements = elements;\n  }\n\n  @Watch('additionalData') additionalDataChanged(data: any) {\n    this.additionaldatachanged.emit(data);\n  }\n\n  /**\n   * Watch for RTL changes and reapply column ordering\n   */\n  @Watch('rtl') rtlChanged() {\n    // The RTL plugin will handle the transformation automatically\n    // Just trigger a column refresh to ensure the plugin processes the change\n    this.columnChanged(this.columns);\n  }\n\n  /**\n   * User can add plugins via plugins property\n   */\n  @Watch('plugins') pluginsChanged(plugins: GridPlugin[] = [], prevPlugins?: GridPlugin[]) {\n    this.pluginService.addUserPluginsAndCreate(this.element, plugins, prevPlugins, this.getPluginData());\n  }\n  // #endregion\n\n  // #region Plugins\n  private setPlugins() {\n    // remove old plugins if any\n    this.removePlugins();\n    // pass data provider to plugins\n    const pluginData = this.getPluginData();\n    if (!pluginData) {\n      return;\n    }\n\n    // register system plugins\n    this.setCorePlugins(pluginData);\n    // register user plugins\n    this.pluginsChanged(this.plugins);\n  }\n  \n  private setCorePlugins(pluginData: PluginProviders) {\n    if (this.accessible) {\n      this.pluginService.add(new WCAGPlugin(this.element, pluginData));\n    }\n\n    // register RTL plugin\n    this.pluginService.add(new RTLPlugin(this.element, pluginData));\n\n    // register auto size plugin\n    if (this.autoSizeColumn) {\n      this.pluginService.add(new AutoSizeColumnPlugin(\n        this.element,\n        pluginData,\n        typeof this.autoSizeColumn === 'object'\n          ? this.autoSizeColumn\n          : undefined,\n      ));\n    }\n\n    // register filter plugin\n    if (this.filter) {\n      this.pluginService.add(\n        new FilterPlugin(\n          this.element,\n          pluginData,\n          typeof this.filter === 'object' ? this.filter : undefined,\n        ),\n      );\n    }\n\n    // register export plugin\n    if (this.exporting) {\n      this.pluginService.add(new ExportFilePlugin(this.element, pluginData));\n    }\n\n    // register sorting plugin\n    this.pluginService.add(new SortingPlugin(this.element, pluginData));\n\n    // register grouping plugin\n    this.pluginService.add(new GroupingRowPlugin(this.element, pluginData));\n    if (this.canMoveColumns) {\n      this.pluginService.add(new ColumnMovePlugin(this.element, pluginData));\n    }\n  }\n\n  getPluginData(): PluginProviders | undefined {\n    if (!this.dimensionProvider || !this.dataProvider || !this.columnProvider || !this.viewportProvider || !this.selectionStoreConnector) {\n      return;\n    }\n\n    // pass data provider to plugins\n    const pluginData: PluginProviders = {\n      data: this.dataProvider,\n      column: this.columnProvider,\n      dimension: this.dimensionProvider,\n      viewport: this.viewportProvider,\n      selection: this.selectionStoreConnector,\n      plugins: this.pluginService,\n    };\n\n    return pluginData;\n  }\n\n  private removePlugins() {\n    this.pluginService.destroy();\n  }\n  // #endregion\n\n  // if reconnect to dom we need to set up plugins\n  connectedCallback() {\n    if (this.isInited) {\n      this.setPlugins();\n    }\n    this.created.emit();\n  }\n\n  /**\n   * Called once just after the component is first connected to the DOM.\n   * Since this method is only called once, it's a good place to load data asynchronously and to setup the state\n   * without triggering extra re-renders.\n   * A promise can be returned, that can be used to wait for the first render().\n   */\n  componentWillLoad() {\n    // #region Setup Providers\n    this.viewportProvider = new ViewportProvider();\n    this.themeService = new ThemeService({\n      rowSize: this.rowSize,\n    });\n    this.dimensionProvider = new DimensionProvider(this.viewportProvider, {\n      realSizeChanged: (k: MultiDimensionType) =>\n        this.contentsizechanged.emit(k),\n    });\n    this.columnProvider = new ColumnDataProvider();\n    this.selectionStoreConnector = new SelectionStoreConnector();\n    this.dataProvider = new DataProvider(this.dimensionProvider);\n    // #endregion\n\n    this.registerOutsideVNodes(this.registerVNode);\n\n    // init plugins\n    this.setPlugins();\n\n    // set data\n    this.applyStretch(this.stretch);\n    this.themeChanged(this.theme, undefined, undefined, true);\n    this.columnChanged(this.columns, undefined, undefined, true);\n    this.dataSourceChanged(this.source, undefined, 'source');\n    this.dataSourceChanged(this.pinnedTopSource, undefined, 'pinnedTopSource');\n    this.dataSourceChanged(\n      this.pinnedBottomSource,\n      undefined,\n      'pinnedBottomSource',\n    );\n    if (Object.keys(this.trimmedRows ?? {}).length > 0) {\n      this.trimmedRowsChanged(this.trimmedRows);\n    }\n    this.rowDefChanged(this.rowDefinitions);\n\n    // init grouping\n    if (this.grouping && Object.keys(this.grouping).length > 0) {\n      this.groupingChanged(this.grouping);\n    }\n\n    // init scrolling service\n    this.scrollingService = new GridScrollingService(\n      (e: ViewPortScrollEvent) => {\n        this.dimensionProvider?.setViewPortCoordinate({\n          coordinate: e.coordinate,\n          type: e.dimension,\n        });\n        this.viewportscroll.emit(e);\n      },\n    );\n\n    this.aftergridinit.emit();\n    // set inited flag for connectedCallback\n    this.isInited = true;\n  }\n\n  componentWillRender() {\n    const event = this.beforegridrender.emit();\n    if (event.defaultPrevented) {\n      return false;\n    }\n    return Promise.all(this.jobsBeforeRender);\n  }\n\n  componentDidRender() {\n    this.aftergridrender.emit();\n  }\n\n  render() {\n    if (!this.dimensionProvider || !this.dataProvider || !this.columnProvider || !this.viewportProvider || !this.selectionStoreConnector) {\n      return;\n    }\n    const contentHeight =\n      this.dimensionProvider.stores['rgRow'].store.get('realSize');\n\n    // init viewport service helpers\n    this.viewport = new ViewportService(\n      {\n        columnProvider: this.columnProvider,\n        dataProvider: this.dataProvider,\n        dimensionProvider: this.dimensionProvider,\n        viewportProvider: this.viewportProvider,\n        scrollingService: this.scrollingService,\n        orderService: this.orderService,\n        selectionStoreConnector: this.selectionStoreConnector,\n        disableVirtualX: this.disableVirtualX,\n        disableVirtualY: this.disableVirtualY,\n        resize: c => this.aftercolumnresize.emit(c),\n      },\n      contentHeight,\n    );\n\n    // #region ViewportSections\n    /**\n     * The code renders a viewport divided into sections.\n     * It starts by rendering the pinned start, data, and pinned end sections.\n     * Within each section, it renders columns along with their headers, pinned top, center data, and pinned bottom.\n     * The code iterates over the columns and their data to generate the view port's HTML structure.\n     */\n\n    const viewportSections: (VNode | VNode[])[] = [];\n\n    // Row headers setting\n    if (this.rowHeaders && this.viewport.columns.length) {\n      const anyView = this.viewport.columns[0];\n      viewportSections.push(\n        <revogr-row-headers\n          additionalData={this.additionalData}\n          height={contentHeight}\n          rowClass={this.rowClass}\n          resize={this.resize}\n          dataPorts={anyView.dataPorts}\n          headerProp={anyView.headerProp}\n          jobsBeforeRender={this.jobsBeforeRender}\n          rowHeaderColumn={\n            typeof this.rowHeaders === 'object' ? this.rowHeaders : undefined\n          }\n          onScrollview={({ detail: e }: CustomEvent) =>\n            this.scrollingService.proxyScroll(e, 'headerRow')\n          }\n          onRef={({ detail: e }: CustomEvent) =>\n            this.scrollingService.registerElement(e, 'headerRow')\n          }\n        />,\n      );\n    }\n\n    // Viewport section render\n    const isMobile = isMobileDevice();\n    const viewPortHtml: VNode[] = [];\n\n    // Render viewports column(horizontal sections)\n    for (let view of this.viewport.columns) {\n      const headerProperties: HeaderProperties = {\n        ...view.headerProp,\n        type: view.type,\n        additionalData: this.additionalData,\n        viewportCol: view.viewportCol,\n        selectionStore: view.columnSelectionStore,\n        canResize: this.resize,\n        readonly: this.readonly,\n        columnFilter: !!this.filter,\n      };\n      // Column headers\n      const dataViews: VNode[] = [\n        <revogr-header {...headerProperties} slot={HEADER_SLOT} />,\n      ];\n\n      // Render viewport data (vertical sections)\n      view.dataPorts.forEach(data => {\n        const key = `${data.type}_${view.type}`;\n        const dataView = (\n          <revogr-overlay-selection\n            {...data}\n            canDrag={this.canDrag && data.canDrag}\n            isMobileDevice={isMobile}\n            onSelectall={() => this.selectionStoreConnector?.selectAll()}\n            editors={this.editors}\n            readonly={this.readonly}\n            range={this.range}\n            useClipboard={this.useClipboard}\n            applyChangesOnClose={this.applyOnClose}\n            additionalData={this.additionalData}\n            slot={data.slot}\n            onBeforenextvpfocus={(e) => this.selectionStoreConnector?.beforeNextFocusCell(e.detail)}\n            onCanceledit={() => this.selectionStoreConnector?.setEdit(false)}\n            onSetedit={({ detail }) => {\n              const event = this.beforeeditstart.emit(detail);\n              if (!event.defaultPrevented) {\n                this.selectionStoreConnector?.setEdit(detail.val);\n              }\n            }}\n          >\n            <revogr-data\n              {...data}\n              colType={view.type}\n              key={key}\n              readonly={this.readonly}\n              range={this.range}\n              rowClass={this.rowClass}\n              rowSelectionStore={data.rowSelectionStore}\n              additionalData={this.additionalData}\n              jobsBeforeRender={this.jobsBeforeRender}\n              slot={DATA_SLOT}\n            >\n              <slot name={`data-${view.type}-${data.type}`} />\n            </revogr-data>\n            <revogr-temp-range\n              selectionStore={data.selectionStore}\n              dimensionRow={data.dimensionRow}\n              dimensionCol={data.dimensionCol}\n            />\n            <revogr-focus\n              colData={data.colData}\n              dataStore={data.dataStore}\n              focusTemplate={this.focusTemplate}\n              rowType={data.type}\n              colType={view.type}\n              selectionStore={data.selectionStore}\n              dimensionRow={data.dimensionRow}\n              dimensionCol={data.dimensionCol}\n            >\n              <slot name={`focus-${view.type}-${data.type}`} />\n            </revogr-focus>\n          </revogr-overlay-selection>\n        );\n\n        dataViews.push(dataView);\n      });\n\n      // Add viewport scroll in the end\n      viewPortHtml.push(\n        <revogr-viewport-scroll\n          {...view.prop}\n          ref={el =>\n            this.scrollingService.registerElement(el, `${view.prop.key}`)\n          }\n          onScrollviewport={e =>\n            this.scrollingService.proxyScroll(e.detail, `${view.prop.key}`)\n          }\n          onScrollviewportsilent={e =>\n            this.scrollingService.scrollSilentService(\n              e.detail,\n              `${view.prop.key}`,\n            )\n          }\n        >\n          {dataViews}\n        </revogr-viewport-scroll>,\n      );\n    }\n\n    viewportSections.push(viewPortHtml);\n    // #endregion\n\n    const typeRow: DimensionType = 'rgRow';\n    const typeCol: DimensionType = 'rgCol';\n\n    const viewports = this.viewportProvider.stores;\n    const dimensions = this.dimensionProvider.stores;\n\n    const verticalScroll = (\n      <revogr-scroll-virtual\n        class=\"vertical\"\n        dimension={typeRow}\n        clientSize={viewports[typeRow].store.get('clientSize')}\n        virtualSize={viewports[typeRow].store.get('virtualSize')}\n        realSize={dimensions[typeRow].store.get('realSize')}\n        ref={el => this.scrollingService.registerElement(el, 'rowScroll')}\n        onScrollvirtual={e => this.scrollingService.proxyScroll(e.detail)}\n      />\n    );\n\n    const horizontalScroll = (\n      <revogr-scroll-virtual\n          class=\"horizontal\"\n          dimension={typeCol}\n          clientSize={viewports[typeCol].store.get('clientSize')}\n          virtualSize={viewports[typeCol].store.get('virtualSize')}\n          realSize={dimensions[typeCol].store.get('realSize')}\n          ref={el => this.scrollingService.registerElement(el, 'colScroll')}\n          onScrollvirtual={e => this.scrollingService.proxyScroll(e.detail)}\n        />\n    );\n\n    return (\n      <Host dir={this.rtl ? 'rtl' : 'ltr'}>\n        {this.hideAttribution ? null : (\n          <revogr-attribution class=\"attribution\" />\n        )}\n        <slot name=\"header\" />\n        <div\n          class=\"main-viewport\"\n          onClick={(e: MouseEvent) => {\n            if (e.currentTarget === e.target) {\n              this.viewport?.clearEdit();\n            }\n          }}\n        >\n          <div class=\"viewports\">\n            <slot name=\"viewport\" />\n            {viewportSections}\n            {verticalScroll}\n            <OrderRenderer ref={e => (this.orderService = e)} />\n          </div>\n        </div>\n        {horizontalScroll}\n        <revogr-extra ref={el => (this.extraService = el)} nodes={this.extraElements} />\n        <slot name=\"footer\" />\n      </Host>\n    );\n  }\n\n  disconnectedCallback() {\n    // Remove all plugins, to avoid memory leaks\n    // and unexpected behaviour when the component is removed\n    this.removePlugins();\n  }\n}\n"],
  "mappings": "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",
  "names": ["_a", "beforesourceset"]
}
