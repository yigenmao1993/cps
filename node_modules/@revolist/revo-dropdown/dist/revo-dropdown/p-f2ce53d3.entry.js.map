{"version":3,"names":["closest","Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","s","el","this","call","parentElement","parentNode","nodeType","UUID","getItemLabel","item","dataLabel","getItemValue","dataId","doFilter","p","val","newSource","filterValue","_a","trim","toLocaleLowerCase","source","filter","indexOf","push","DropdownListFilter","filterChange","value","items","onFilterChange","autocomplete","h","Object","assign","class","type","onClick","e","preventDefault","onInput","currentTarget","ArrowRenderer","focusable","role","xmlns","viewBox","fill","d","revoDropdownStyleCss","RevoDropdownStyle0","RevoDropdown","uuid","isClosing","doClose","isDisconnected","event","close","emit","defaultPrevented","isVisible","doOpen","open","doChange","originalEvent","changeValue","autocompleteInput","currentItem","autoClose","onMouseUp","isOutside","target","onKey","code","onValueChanged","newVal","getValue","componentWillLoad","connectedCallback","uuidv4","Date","getTime","disconnectedCallback","componentDidRender","dropdown","appendTo","document","body","appendChild","querySelector","HTMLElement","updateStyles","dropdownInput","focus","autoFocus","setTimeout","renderDropdown","ref","dropdownInner","hasFilter","currentFilter","currentSource","revoList","refresh","undefined","isFocused","selectedIndex","getValueIndex","sourceItems","onChanged","detail","template","renderSelect","disabled","renderAutocomplete","onKeyDown","showAutoComplete","onFocus","render","list","props","active","shrink","element","selectClick","Host","key","placeholder","i","index","top","left","height","getBoundingClientRect","visibleRect","clientRectangle","currentTop","style","opacity","display","centerY","maxHeight","classList","add","bottom","remove","currentLeft","rightSpace","right","clientWidth","Math","min","maxWidth","rect","window","pageYOffset","documentElement","scrollTop","clientHeight","pageXOffset","scrollLeft","width","centerX","stamp","replace","c","r","random","v","toString","revoListStyleCss","RevoListStyle0","RevoDropdownList","changed","valueChanged","newV","selectedEl","scrollIntoView","block","inline","isSelected","parseInt","selected","li"],"sources":["src/utils/closestPolifill.ts","src/utils/consts.ts","src/utils/item.helpers.ts","src/components/list/revo-list.filter.tsx","src/components/dropdown/arrow.tsx","src/components/dropdown/revo-dropdown.style.scss?tag=revo-dropdown","src/components/dropdown/revo-dropdown.tsx","src/components/list/revo-list.style.scss?tag=revo-list","src/components/list/revo-list.tsx"],"sourcesContent":["(function closest() {\n  if (!Element.prototype.matches) {\n    Element.prototype.matches =\n      ((Element.prototype as unknown) as { msMatchesSelector: (selectors: string) => boolean }).msMatchesSelector || Element.prototype.webkitMatchesSelector;\n  }\n\n  if (!Element.prototype.closest) {\n    Element.prototype.closest = function (s: string) {\n      let el: HTMLElement | Element | (Node & ParentNode) = this;\n\n      do {\n        if (Element.prototype.matches.call(el, s)) {\n          return el;\n        }\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType === 1);\n      return null;\n    };\n  }\n})();\n","export const UUID = 'uuid';\n","export function getItemLabel<T>(item: T, dataLabel?: string): T|string {\n  if (!item) {\n    return '';\n  }\n  return dataLabel ? item[dataLabel] : item;\n}\n\nexport function getItemValue<T>(item: T, dataId?: string): T {\n  return dataId ? item[dataId] : item;\n}\n","import { h } from '@stencil/core';\nimport { JSXBase } from '@stencil/core/internal';\nimport { getItemLabel } from '../../utils/item.helpers';\n\ninterface Props extends JSXBase.DOMAttributes<HTMLElement> {\n  value?: string;\n  filterValue?: string;\n  source: any[];\n  dataLabel?: string;\n  filter?: 'contains' | 'start';\n  autocomplete?: string;\n  ref?(e: HTMLInputElement): void;\n  onInput?(): void;\n  onFocus?(): void;\n  onClick?(e: MouseEvent): void;\n  onFilterChange(e: { value?: string; items: any[] }): void;\n}\n\nfunction doFilter(p: Props, val?: string) {\n  let newSource = [];\n  const filterValue = val?.trim()?.toLocaleLowerCase();\n  if (!filterValue) {\n    newSource = p.source;\n  } else {\n    for (let item of p.source) {\n      let val = getItemLabel(item, p.dataLabel);\n      if (typeof val === 'string') {\n        val = val.toLocaleLowerCase();\n        switch (p.filter) {\n          case 'start':\n            if (val.indexOf(filterValue) === 0) {\n              newSource.push(item);\n            }\n            break;\n          default:\n            if (val.indexOf(filterValue) > -1) {\n              newSource.push(item);\n            }\n            break;\n        }\n      }\n    }\n  }\n  return newSource;\n}\n\nexport const DropdownListFilter = (p: Props) => {\n  const filterChange = (value?: string) => {\n    const items = doFilter(p, value);\n    p.onFilterChange({ value, items });\n  };\n\n  if (!p.filter) {\n    p.filter = 'contains';\n  }\n  filterChange(p.filterValue);\n  if (p.autocomplete) {\n    p.value = p.filterValue;\n  }\n  return (\n    <input class={{ 'filter-box': true, }} type=\"text\"\n      {...p}\n      onClick={e => {\n        e.preventDefault();\n        p.onClick && p.onClick(e);\n      }}\n      onInput={e => {\n        p.onInput && p.onInput();\n        const value = (e.currentTarget as HTMLInputElement)?.value;\n        filterChange(value);\n      }}\n    />\n  );\n};\n","import { h } from '@stencil/core';\n\nexport const ArrowRenderer = () => {\n  return (\n    <span class=\"arrow-wrapper\">\n      <svg class=\"arrow\" aria-hidden=\"true\" focusable=\"false\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\">\n        <path fill=\"currentColor\" d=\"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z\"></path>\n      </svg>\n    </span>\n  );\n};\n","@mixin fontStyle {\n  font-size: 1em;\n  font-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;\n  font-weight: 400;\n  line-height: 2em;\n  letter-spacing: 0.01em;\n}\n\n$border-color: #ececec;\n$border-size: 1px;\n\n$padding: 10px;\n$font-size: 14px;\n\nrevo-dropdown {\n  @include fontStyle;\n\n  display: inline-flex;\n  flex-direction: column;\n  vertical-align: top;\n\n  padding: 0;\n  box-sizing: border-box;\n  cursor: pointer;\n  position: relative;\n\n  .rv-dr-root {\n    padding: 5px 9px;\n    padding-right: 35px;\n    flex-wrap: wrap;\n    position: relative;\n    border-radius: 4px;\n\n    cursor: text;\n    display: inline-flex;\n    position: relative;\n    font-size: 1rem;\n    box-sizing: border-box;\n    align-items: center;\n  }\n\n  input.filter-box {\n    padding-left: 6px;\n    padding: 9.5px 4px;\n    width: 0;\n    min-width: 30px;\n    flex-grow: 1;\n    text-overflow: ellipsis;\n    border: 0;\n    height: 1.1876em;\n    margin: 0;\n    display: block;\n    background: none;\n    box-sizing: content-box;\n    letter-spacing: inherit;\n    animation-duration: 10ms;\n\n    &:focus {\n      outline: none;\n    }\n  }\n\n  .actions {\n    right: 9px;\n    top: calc(50% - $font-size);\n    position: absolute;\n  }\n\n  label {\n    $time: 200ms;\n    font-size: 1rem;\n    z-index: 100;\n    top: 0;\n    left: 0;\n    position: absolute;\n    display: block;\n    transform-origin: top left;\n    line-height: 1;\n    transition: color $time cubic-bezier(0, 0, 0.2, 1) 0ms, transform $time cubic-bezier(0, 0, 0.2, 1) 0ms;\n    transform: translate($font-size, $font-size) scale(1);\n    pointer-events: none;\n  }\n\n  fieldset {\n    border-color: $border-color;\n    top: -5px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: 0;\n    padding: 0 8px;\n    overflow: hidden;\n    position: absolute;\n    z-index: 0;\n    border-style: solid;\n    border-width: $border-size;\n    border-radius: inherit;\n    pointer-events: none;\n\n    legend {\n      width: auto;\n      height: 11px;\n      display: block;\n      padding: 0;\n      font-size: 0.75em;\n      max-width: 0.01px;\n      text-align: left;\n      transition: max-width 50ms cubic-bezier(0, 0, 0.2, 1) 0ms;\n      visibility: hidden;\n\n      > span {\n        display: inline-block;\n        padding-left: 5px;\n        padding-right: 5px;\n      }\n    }\n  }\n\n  &.shrink {\n    label {\n      transform: translate($font-size, -6px) scale(0.75);\n    }\n\n    legend {\n      max-width: 1000px;\n      transition: max-width 100ms cubic-bezier(0, 0, 0.2, 1) 50ms;\n    }\n  }\n\n  .arrow {\n    width: 9px;\n    margin-top: 5px;\n    margin-left: 5px;\n    opacity: 0.4;\n  }\n\n  .arrow-wrapper {\n    width: 15px;\n    text-align: center;\n  }\n\n  &.active {\n    $bg: #0089ff;\n\n    label {\n      color: $bg;\n    }\n    fieldset {\n      border-color: $bg;\n    }\n  }\n}\n\n.revo-dropdown-list {\n  @include fontStyle;\n\n  position: absolute;\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n  z-index: 999;\n  display: none;\n  opacity: 0;\n\n  &.top .dropdown-inner {\n    bottom: 2px;\n    flex-direction: column-reverse;\n\n    .filter-box {\n      margin-bottom: 0;\n    }\n  }\n\n  &:not(.top) .dropdown-inner {\n    top: 2px;\n    flex-direction: column;\n\n    .filter-box {\n      margin-top: 0;\n    }\n  }\n\n  .dropdown-inner {\n    display: flex;\n    max-height: 100%;\n    position: absolute;\n\n    padding: 8px 0;\n    box-sizing: border-box;\n\n    min-height: 16px;\n    min-width: 16px;\n\n    box-shadow: 0 0 14px 0 rgba(53, 64, 82, 0.05);\n    border: 1px solid rgb(0 0 0 / 5%);\n    border-radius: 4px;\n    color: rgba(0, 0, 0, 0.87);\n    overflow: hidden;\n    background-color: #fff;\n\n    .filter-box {\n      border: 1px solid $border-color;\n      min-height: 30px;\n      line-height: 30px;\n      margin: 10px;\n      border-radius: 6px;\n\n      &:focus {\n        outline: none;\n        border-color: #0089ff;\n      }\n    }\n  }\n}\n","import { Component, Prop, h, VNode, State, Listen, Event, EventEmitter, Method, Watch, Host } from '@stencil/core';\nimport '../../utils/closestPolifill';\nimport { UUID } from '../../utils/consts';\nimport { getItemLabel, getItemValue } from '../../utils/item.helpers';\nimport { DropdownListFilter } from '../list/revo-list.filter';\nimport { ArrowRenderer } from './arrow';\n\n@Component({\n  tag: 'revo-dropdown',\n  styleUrl: 'revo-dropdown.style.scss',\n})\nexport class RevoDropdown {\n  private element: Element;\n  private dropdown: HTMLElement;\n  private dropdownInner: HTMLElement;\n  private dropdownInput: HTMLInputElement;\n  private autocompleteInput: HTMLInputElement;\n  private revoList: HTMLRevoListElement;\n  private uuid: string = '';\n  private currentSource?: any[];\n  private isClosing = false;\n\n  @State() currentItem: any = null;\n  @State() isVisible = false;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Props\n  //\n  // --------------------------------------------------------------------------\n  /**\n   * Define object mapping for labels\n   */\n  @Prop() dataLabel: string;\n  /**\n   * Selected value\n   */\n  @Prop({ mutable: true }) value: any;\n  /**\n   * Filter value\n   */\n  @Prop({ mutable: true }) currentFilter: any;\n\n  /**\n   * Define object mapping for id/value\n   */\n  @Prop() dataId: string;\n  /**\n   * Should dropdown autoclose on changeValue\n   */\n  @Prop() autoClose: boolean = true;\n\n  /**\n   * Define object mapping for id/value\n   */\n  @Prop() source: any[] = [];\n\n  /**\n   * Placeholder text\n   */\n  @Prop() placeholder: string = 'Select';\n  /**\n   * Where to append element\n   */\n  @Prop() appendTo: 'body' | 'current' | string = 'body';\n  /**\n   * Filter criteria\n   */\n  @Prop() filter: 'contains' | 'start';\n\n  @Prop() maxHeight: number;\n\n  @Prop() hasFilter: boolean = true;\n\n  @Prop() autocomplete: boolean = false;\n  @Prop() autoFocus: boolean = false;\n\n  /**\n   * Define your own vnode template\n   * @example\n   * <revo-dropdown template={(h, item) => h('span', null, item.label)} />\n   */\n  @Prop() template?: (h: Function, item: any) => VNode;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  // --------------------------------------------------------------------------\n  /**\n   * When value changed\n   */\n  @Event({ eventName: 'changed' }) changeValue: EventEmitter<{ val: any; originalEvent?: MouseEvent }>;\n  /**\n   * Before element close, can be prevented\n   */\n  @Event() close: EventEmitter;\n\n  /**\n   * Before element open, can be prevented\n   */\n  @Event() open: EventEmitter;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Methods\n  //\n  // --------------------------------------------------------------------------\n\n  /**\n   * Close dropdown\n   */\n  @Method() async doClose(isDisconnected = false): Promise<void> {\n    if (!isDisconnected) {\n      const event = this.close.emit();\n      if (event.defaultPrevented) {\n        return;\n      }\n    }\n    this.isClosing = true;\n    this.isVisible = false;\n  }\n  /**\n   * Open dropdown\n   */\n  @Method() async doOpen(): Promise<void> {\n    const event = this.open.emit();\n    if (event.defaultPrevented) {\n      return;\n    }\n    this.isVisible = true;\n  }\n\n  /**\n   * Change value\n   */\n  @Method() async doChange(val: any, originalEvent?: MouseEvent): Promise<void> {\n    this.value = getItemValue(val, this.dataId);\n    this.changeValue.emit({ val: this.value, originalEvent });\n    if (this.autocompleteInput) {\n      this.autocompleteInput.value = getItemLabel(this.currentItem, this.dataLabel);\n    }\n    if (this.autoClose && this.isVisible) {\n      this.doClose();\n    }\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Internal\n  //\n  // --------------------------------------------------------------------------\n\n  /** Action finished */\n  @Listen('mousedown', { target: 'document' })\n  onMouseUp(e: MouseEvent): void {\n    if (this.isVisible && !e.defaultPrevented) {\n      const isOutside = !(e.target as HTMLElement | null)?.closest(`[${UUID}=\"${this.uuid}\"]`);\n      if (isOutside) {\n        this.doClose();\n      }\n    }\n  }\n\n  @Listen('keydown', { target: 'document' }) onKey(e: KeyboardEvent) {\n    switch (e.code) {\n      case 'Escape':\n        e.preventDefault();\n        this.doClose();\n        break;\n    }\n  }\n\n  @Watch('value') onValueChanged(newVal: any) {\n    this.currentItem = this.getValue(newVal);\n  }\n\n  componentWillLoad() {\n    if (this.value) {\n      this.currentItem = this.value;\n    }\n  }\n\n  connectedCallback() {\n    this.uuid = `${this.uuidv4(new Date().getTime())}-rvdropdown`;\n    if (typeof this.value !== 'undefined') {\n      this.onValueChanged(this.value);\n    }\n  }\n\n  disconnectedCallback() {\n    this.doClose(true);\n  }\n\n  componentDidRender() {\n    if (this.dropdown) {\n      if (this.appendTo === 'body') {\n        document.body.appendChild(this.dropdown);\n      } else if (this.appendTo !== 'current' && typeof this.appendTo === 'string') {\n        const el: HTMLElement = document.querySelector(this.appendTo);\n        if (el instanceof HTMLElement) {\n          el.appendChild(this.dropdown);\n        }\n      }\n    }\n    if (this.isVisible) {\n      this.updateStyles();\n    }\n    if (this.dropdownInput) {\n      this.dropdownInput.focus();\n    }\n    if (this.autoFocus) {\n      if (this.autocomplete) {\n        setTimeout(() => this.autocompleteInput?.focus(), 0);\n      }\n    }\n  }\n\n  private renderDropdown() {\n    return (\n      <div class=\"revo-dropdown-list\" ref={e => (this.dropdown = e)}>\n        <div {...{ [UUID]: this.uuid }} class=\"dropdown-inner\" ref={e => (this.dropdownInner = e)}>\n          {this.hasFilter && !this.autocomplete ? (\n            <DropdownListFilter\n              ref={e => (this.dropdownInput = e)}\n              source={this.source}\n              filter={this.filter}\n              dataLabel={this.dataLabel}\n              value={this.currentFilter || ''}\n              filterValue={this.currentFilter || ''}\n              onFilterChange={e => {\n                this.currentFilter = e.value;\n                this.currentSource = e.items;\n                this.revoList?.refresh(this.currentSource);\n              }}\n            />\n          ) : undefined}\n          <revo-list\n            ref={e => (this.revoList = e)}\n            isFocused={true}\n            selectedIndex={this.getValueIndex(this.value)}\n            sourceItems={this.currentSource}\n            onChanged={e => this.doChange(e.detail.item, e.detail.e)}\n            template={item => (this.template ? this.template(h, item) : getItemLabel(item, this.dataLabel))}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  renderSelect() {\n    const val = (this.currentItem && getItemLabel(this.currentItem, this.dataLabel)) || '';\n    return <input type=\"text\" disabled class=\"filter-box\" value={val} />;\n  }\n\n  renderAutocomplete() {\n    const val = this.currentItem ? getItemLabel(this.currentItem, this.dataLabel) : '';\n    return (\n      <DropdownListFilter\n        ref={e => (this.autocompleteInput = e)}\n        autocomplete=\"true\"\n        source={this.source}\n        filter={this.filter}\n        dataLabel={this.dataLabel}\n        value={val}\n        filterValue={this.currentFilter}\n        onKeyDown={e => {\n          if (this.isVisible) {\n            return;\n          }\n          switch (e.code) {\n            case 'ArrowUp':\n            case 'ArrowDown':\n              e.preventDefault();\n              this.showAutoComplete();\n              break;\n          }\n        }}\n        onInput={() => this.showAutoComplete()}\n        onFocus={() => this.showAutoComplete()}\n        onClick={() => this.showAutoComplete()}\n        onFilterChange={e => {\n          this.currentFilter = e.value;\n          this.currentSource = e.items;\n          this.revoList?.refresh(this.currentSource);\n        }}\n      />\n    );\n  }\n\n  render() {\n    let list: VNode;\n    if (this.isVisible) {\n      list = this.renderDropdown();\n    }\n    const props = {\n      [UUID]: this.uuid,\n      class: {\n        active: this.isVisible,\n        shrink: this.isVisible || !!this.currentItem || !!this.autocompleteInput?.value,\n      },\n      ref: e => (this.element = e),\n      onClick: e => this.selectClick(e),\n    };\n    if (this.autocomplete) {\n      props['autocomplete'] = true;\n    }\n    return (\n      <Host {...props}>\n        <label>{this.placeholder}</label>\n        <div class=\"rv-dr-root\">\n          {this.autocomplete ? this.renderAutocomplete() : this.renderSelect()}\n          <span class=\"actions\">\n            <ArrowRenderer />\n          </span>\n          <fieldset>\n            <legend>\n              <span>{this.placeholder}</span>\n            </legend>\n          </fieldset>\n        </div>\n        {list}\n      </Host>\n    );\n  }\n\n  private showAutoComplete() {\n    if (!this.isVisible && !this.isClosing) {\n      this.isVisible = true;\n    }\n    this.isClosing = false;\n  }\n\n  private getValueIndex(newVal: any) {\n    let i = 0;\n    for (let index in this.source) {\n      const item = this.source[index];\n      if (newVal == getItemValue(item, this.dataId)) {\n        return i;\n      }\n      i++;\n    }\n    return -1;\n  }\n\n  private getValue(newVal: any) {\n    for (let index in this.source) {\n      const item = this.source[index];\n      if (newVal == getItemValue(item, this.dataId)) {\n        return item;\n      }\n    }\n    return null;\n  }\n\n  private selectClick(e: Event) {\n    if (e.defaultPrevented) {\n      return;\n    }\n    if (this.isVisible) {\n      this.doClose();\n    } else {\n      this.doOpen();\n    }\n  }\n\n  private updateStyles() {\n    if (!this.dropdown) {\n      return;\n    }\n    const { top, left, height } = this.element.getBoundingClientRect();\n    const visibleRect = this.clientRectangle();\n    let currentTop = top + height + visibleRect.top;\n\n    const style: {\n      top?: string;\n      maxHeight?: number;\n      maxWidth?: string;\n      left?: string;\n      opacity?: number;\n      display: string;\n    } = {\n      opacity: 1,\n      display: 'block',\n    };\n\n    // top\n    if (currentTop > visibleRect.centerY) {\n      style.top = `${currentTop - height}px`;\n      style.maxHeight = currentTop - height - visibleRect.top - 50;\n      this.dropdown.classList.add('top');\n\n      // bottom\n    } else {\n      style.top = `${currentTop}px`;\n      style.maxHeight = visibleRect.bottom - currentTop - 50;\n      this.dropdown.classList.remove('top');\n    }\n\n    // left\n    let currentLeft = left + visibleRect.left;\n    const rightSpace = visibleRect.right - (currentLeft + this.dropdown.clientWidth);\n    if (rightSpace < 0) {\n      currentLeft += rightSpace;\n    }\n    style.left = `${currentLeft}px`;\n    this.dropdownInner.style.maxHeight = `${Math.min(style.maxHeight, this.maxHeight || style.maxHeight)}px`;\n    this.dropdownInner.style.maxWidth = style.maxWidth;\n\n    for (let s in style) {\n      this.dropdown.style[s] = style[s];\n    }\n  }\n\n  private clientRectangle() {\n    const rect = {\n      top: window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop,\n      bottom: 0,\n      centerY: 0,\n      height: document.body.clientHeight,\n      left: window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,\n      right: 0,\n      width: document.body.clientWidth,\n      centerX: 0,\n    };\n    rect.bottom = rect.top + rect.height;\n    rect.right = rect.left + rect.width;\n    rect.centerY = rect.top + rect.height / 2;\n    rect.centerX = rect.left + rect.width / 2;\n    return rect;\n  }\n\n  private uuidv4(stamp: number) {\n    return `${stamp}-xx-y`.replace(/[xy]/g, c => {\n      var r = (Math.random() * 16) | 0,\n        v = c == 'x' ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n}\n","$hv-color: rgba(black, 0.04);\nrevo-list {\n  overflow-x: hidden;\n  overflow-y: auto;\n  max-height: 100%;\n  display: block;\n\n  ul {\n    margin: 0;\n    padding: 0;\n    outline: 0;\n    list-style: none;\n  }\n\n  ul > li {\n    width: auto;\n    overflow: hidden;\n    font-size: 14px;\n    box-sizing: border-box;\n    min-height: 48px;\n    font-weight: 400;\n    line-height: 1.5;\n    padding-top: 6px;\n    white-space: nowrap;\n    padding-bottom: 6px;\n    padding-left: 16px;\n    padding-right: 16px;\n    display: flex;\n    position: relative;\n    text-align: left;\n    align-items: center;\n    justify-content: flex-start;\n    text-decoration: none;\n    cursor: pointer;\n\n    &.selected {\n      background-color: $hv-color;\n    }\n\n    &:hover {\n      background-color: $hv-color;\n    }\n  }\n}\n","import { Component, h, Prop, Event, EventEmitter, Method, Listen, State, Watch, VNode } from '@stencil/core';\n\n@Component({ tag: 'revo-list', styleUrl: 'revo-list.style.scss' })\nexport class RevoDropdownList {\n  @State() currentItem = 0;\n  private selectedEl: HTMLElement;\n  /**\n   * Define object mapping for id/value\n   */\n  @Prop() sourceItems: any[] = [];\n  @Prop() isFocused: boolean = false;\n\n  /**\n   * Selected Value Index\n   */\n  @Prop() selectedIndex = 0;\n\n  @Prop() template!: (item: any) => VNode;\n\n  @Event({ bubbles: false }) changed: EventEmitter<{ item: any; e: any }>;\n\n  /** Recived keyboard down from element */\n  @Listen('keydown', { target: 'document' }) onKey(e: KeyboardEvent) {\n    let item: any;\n    if (!this.isFocused) {\n      return;\n    }\n    switch (e.code) {\n      case 'ArrowUp':\n        e.preventDefault();\n        if (this.currentItem <= 0) {\n          return;\n        }\n        this.currentItem--;\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        if (this.sourceItems[this.currentItem + 1]) {\n          this.currentItem++;\n        }\n        break;\n      case 'Tab':\n        e.preventDefault();\n        item = this.sourceItems[this.currentItem];\n        if (item) {\n          this.changed.emit({ item, e });\n        }\n        break;\n      case 'Enter':\n        e.preventDefault();\n        item = this.sourceItems[this.currentItem];\n        if (item) {\n          this.changed.emit({ item, e });\n        }\n        break;\n    }\n  }\n\n  @Method() async refresh(source: any[]) {\n    this.sourceItems = source;\n  }\n\n  @Watch('selectedIndex') valueChanged(newV: number) {\n    this.currentItem = newV;\n  }\n\n  componentWillLoad() {\n    this.valueChanged(this.selectedIndex);\n  }\n\n  componentDidRender() {\n    this.selectedEl?.scrollIntoView({\n      block: 'nearest',\n      inline: 'nearest',\n    });\n  }\n\n  render() {\n    this.selectedEl = undefined;\n    const items = [];\n    for (let i in this.sourceItems) {\n      const item = this.sourceItems[i];\n      const isSelected = parseInt(i) === this.currentItem;\n      const props = {\n        class: { selected: isSelected },\n        ref: e => {\n          if (isSelected) {\n            this.selectedEl = e;\n          }\n        },\n        onClick: e => this.changed.emit({ item, e }),\n      };\n      const li = <li {...props}>{this.template(item)}</li>;\n      items.push(li);\n    }\n    return <ul>{items}</ul>;\n  }\n}\n"],"mappings":"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","ignoreList":[]}